unix.py:120 DEBUG:/etc/localtime found
unix.py:136 DEBUG:1 found:
 {'/etc/localtime is a symlink to': 'America/Toronto'}
database_session_service.py:463 INFO:Local timezone: America/Toronto
runners.py:270 WARNING:App name mismatch detected. The runner is configured with app name "ottawa_public_health_agent", but the root agent was loaded from "/Users/leo/projects/kaggle/ottawa-public-health-agent/.venv/lib/python3.12/site-packages/google/adk/agents", which implies app name "agents".
selector_events.py:64 DEBUG:Using selector: KqueueSelector
core.py:104 DEBUG:executing <function connect.<locals>.connector at 0x10b6e9620>
core.py:106 DEBUG:operation <function connect.<locals>.connector at 0x10b6e9620> completed
core.py:104 DEBUG:executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x10b6bb3d0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x10b6d4540>, deterministic=True)
core.py:106 DEBUG:operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x10b6bb3d0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x10b6d4540>, deterministic=True) completed
core.py:104 DEBUG:executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x10b6bb3d0>, 'floor', 1, <built-in function floor>, deterministic=True)
core.py:106 DEBUG:operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x10b6bb3d0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b6cf8c0>, 'PRAGMA read_uncommitted', [])
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b6cf8c0>, 'PRAGMA read_uncommitted', []) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b6cf8c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b6cf8c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b6cf8c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b6cf8c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b6cf8c0>, 'PRAGMA foreign_keys=ON', [])
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b6cf8c0>, 'PRAGMA foreign_keys=ON', []) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b6cf8c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b6cf8c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b6cf8c0>, 'PRAGMA main.table_info("sessions")', ())
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b6cf8c0>, 'PRAGMA main.table_info("sessions")', ()) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b6cf8c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b6cf8c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b6cf8c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b6cf8c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b6cf8c0>, 'PRAGMA main.table_info("events")', ())
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b6cf8c0>, 'PRAGMA main.table_info("events")', ()) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b6cf8c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b6cf8c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b6cf8c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b6cf8c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b6cf8c0>, 'PRAGMA main.table_info("app_states")', ())
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b6cf8c0>, 'PRAGMA main.table_info("app_states")', ()) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b6cf8c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b6cf8c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b6cf8c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b6cf8c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b6cf8c0>, 'PRAGMA main.table_info("user_states")', ())
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b6cf8c0>, 'PRAGMA main.table_info("user_states")', ()) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b6cf8c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b6cf8c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b6cf8c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b6cf8c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b708cc0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b708cc0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b708cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b708cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b708cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b708cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b708cc0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b708cc0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b708cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b708cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b708cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b708cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b708cc0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b708cc0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b708cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b708cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b708cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b708cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b708cc0>, 'INSERT INTO sessions (app_name, user_id, id, state, create_time, update_time) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP) RETURNING create_time, update_time', ('ottawa_public_health_agent', 'user', 'my_session_id', '{}'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b708cc0>, 'INSERT INTO sessions (app_name, user_id, id, state, create_time, update_time) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP) RETURNING create_time, update_time', ('ottawa_public_health_agent', 'user', 'my_session_id', '{}')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b708cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b708cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b708cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b708cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b741bc0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b741bc0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b741bc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b741bc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b741bc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b741bc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b7701c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b7701c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b7701c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b7701c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b7701c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b7701c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b742dc0>, 'SELECT events.id, events.app_name, events.user_id, events.session_id, events.invocation_id, events.author, events.actions, events.long_running_tool_ids_json, events.branch, events.timestamp, events.content, events.grounding_metadata, events.custom_metadata, events.usage_metadata, events.citation_metadata, events.partial, events.turn_complete, events.error_code, events.error_message, events.interrupted, events.input_transcription, events.output_transcription \nFROM events \nWHERE events.app_name = ? AND events.session_id = ? AND events.user_id = ? ORDER BY events.timestamp DESC', ('ottawa_public_health_agent', 'my_session_id', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b742dc0>, 'SELECT events.id, events.app_name, events.user_id, events.session_id, events.invocation_id, events.author, events.actions, events.long_running_tool_ids_json, events.branch, events.timestamp, events.content, events.grounding_metadata, events.custom_metadata, events.usage_metadata, events.citation_metadata, events.partial, events.turn_complete, events.error_code, events.error_message, events.interrupted, events.input_transcription, events.output_transcription \nFROM events \nWHERE events.app_name = ? AND events.session_id = ? AND events.user_id = ? ORDER BY events.timestamp DESC', ('ottawa_public_health_agent', 'my_session_id', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b742dc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b742dc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b742dc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b742dc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b742dc0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b742dc0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b742dc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b742dc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b742dc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b742dc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b742dc0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b742dc0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b742dc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b742dc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b742dc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b742dc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b771c40>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b771c40>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b771c40>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b771c40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b771c40>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b771c40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b771c40>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b771c40>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b771c40>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b771c40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b771c40>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b771c40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b771c40>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b771c40>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b771c40>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b771c40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b771c40>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b771c40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b741bc0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('814024d6-4305-4ff9-b462-974bd181736c', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-ebe3d49c-d665-4513-83a8-aa050119411b', 'user', <memory at 0x10b6728c0>, None, None, '2025-11-30 13:45:06.888410', '{"parts": [{"text": "what is the weather"}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b741bc0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('814024d6-4305-4ff9-b462-974bd181736c', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-ebe3d49c-d665-4513-83a8-aa050119411b', 'user', <memory at 0x10b6728c0>, None, None, '2025-11-30 13:45:06.888410', '{"parts": [{"text": "what is the weather"}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b741bc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b741bc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b772b40>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b772b40>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b772b40>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b772b40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b772b40>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b772b40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
google_llm.py:163 INFO:Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
google_llm.py:169 DEBUG:
LLM Request:
-----------------------------------------------------------
System Instruction:
Your purpose is to orchestrate a team of specialized agents in order to answer any user query, with particular expertise in Ottawa Public Health outbreak information.
    You should also engage in helpful conversation and remember details the user shares with you (like their name).
    
    CURRENT TIME CONTEXT: Operate in timezone America/Toronto for Ottawa, Canada.
    IMPORTANT: For any question about time/date/timezone, delegate to the `TimeAgent`.

    AVAILABLE SPECIALISTS:

    AVAILABLE SPECIALISTS:
    1. `RetrieveHealthDataAgent`: Fetches CURRENT Ottawa Public Health facility outbreak reports. Use this for questions about **active/recent outbreaks** in:
       1) Camp
       2) Congregate Care
       3) Communal Living Facility
       4) Correctional Facility
       5) Group Home
       6) Supportive Living
       7) Hospice
       8) Hospital
       9) Licensed Child Care Facility/ Daycare
      10) Long Term Care Home
      11) Retirement Home
      12) Rooming House
      13) Elementary School
      14) Secondary School
      15) Post Secondary School
      16) Shelter
      17) Supported Independent Living
    2. `HealthAdviceAgent`: Use this for:
       - **Visitor Advice**: Official OPH guidelines for visiting facilities with outbreaks.
       - **Health/Disease Inquiries**: Questions about Communicable Diseases (symptoms, prevention, treatment) or General Public Health.
       (Note: This agent handles its own research for health topics, so do NOT call `ResearchAgent` separately for these).
    3. `ResearchAgent`: Searches the web. Use this for:
       - **General Facts & Knowledge**: History, News, Leadership, Statistics.
       - **Non-Advice Public Health**: Questions like "Who is the head of OPH?" or "History of pandemics".
       - (Note: Do NOT use for specific disease advice/symptoms; use `HealthAdviceAgent` instead).
       - (Note: Do NOT use for active outbreaks in the facilities listed above; use `RetrieveHealthDataAgent`).
    4. `DataAnalystAgent`: Analyzes data. Call this for **ANY** math, calculations, date arithmetic (if relative to a known date), or code execution tasks.
    5. `SummarizerAgent`: Synthesizes reports. Use this ONLY for complex multi-source data aggregation.
    6. `TimeAgent`: Fetches the current date and time. Use this for questions like "What time is it?", "What is today's date?", etc.

    WORKFLOW PROTOCOL:
    1. **Outbreak Data**: If user asks for active outbreaks in ANY monitored facility (LTC, Schools, Hospitals, Shelters, etc.):
       Call `RetrieveHealthDataAgent`.
       THEN call `HealthAdviceAgent` to provide visitor safety advice.
       THEN return the combined result yourself.
    2. **Health/Disease ADVICE**: If user asks for guidance on diseases, symptoms, prevention, or what to do, call `HealthAdviceAgent` directly.
       Return the advice provided by the agent.
    3. **General Research**: For other topics (non public health related), call `ResearchAgent`.
       Return the findings directly.
    4. **Analysis**: For math/stats/logic/data analysis/programming, call `DataAnalystAgent`.
       Return the analysis result directly.
    

You are an agent. Your internal name is "ottawa_public_health_agent".
-----------------------------------------------------------
Config:
{'tools': [{}]}
-----------------------------------------------------------
Contents:
{"parts":[{"text":"what is the weather"}],"role":"user"}
-----------------------------------------------------------
Functions:
RetrieveHealthDataAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
ResearchAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
DataAnalystAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
SummarizerAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
HealthAdviceAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
TimeAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
-----------------------------------------------------------

google_llm.py:219 INFO:Response received from the model.
types.py:6573 WARNING:Warning: there are non-text parts in the response: ['function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
google_llm.py:220 DEBUG:
LLM Response:
-----------------------------------------------------------
Text:
None
-----------------------------------------------------------
Function calls:
name: ResearchAgent, args: {'request': 'current weather'}
-----------------------------------------------------------
Raw response:
{"sdk_http_response":{"headers":{"Content-Type":"application/json; charset=UTF-8","Vary":"Origin, X-Origin, Referer","Content-Encoding":"gzip","Date":"Sun, 30 Nov 2025 18:45:08 GMT","Server":"scaffolding on HTTPServer2","X-XSS-Protection":"0","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Server-Timing":"gfet4t7; dur=910","Alt-Svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","Transfer-Encoding":"chunked"}},"candidates":[{"content":{"parts":[{"function_call":{"args":{"request":"current weather"},"name":"ResearchAgent"},"thought_signature":"CtgCAXLI2nzIjgdzbBnI2DzJSe26nEK6h-NsGXwJIp3LvTU0-B-yT89xBB0te4LJMo1EaO3KOk7yacyoOJIC6U5LObPe-AOHKfFQtT3SB_CAoSqggYqn4yAg6eLYYiQFxkMOtYEPfSiCZqv4j8xvoRSMU1dHeY7UxTibr6i_YYqRNWvXAoQS7PH3wT2BaVqr4GNy70wMDoCFIxXBVclpkFMqyffYPo_ikaRrLnxxurf1rQPJlQYn98z17NsnEknLFB6FY5xikykGd28HZ-hveY4rgUw-n4Tgg-wLcVQmWgkVwDmdeq1rs0ZiggPf1XGuuo2As8PKRq7fsDU4Bh6KSxf9dBcEUOKEoZgP4RcynuYxP5-lFvFK1IU35n4ps3OyOo9FoofIPlIN8LfLDxo_ma2Q8li5ixaVYFyUSl0U_Ny_m5WBLYlryMFfjTl69_ywbISMPDvm4dBha2s="}],"role":"model"},"finish_reason":"STOP","index":0}],"model_version":"gemini-2.5-flash","response_id":"tJAsaaA2yLyOsQ-d7ZOJDQ","usage_metadata":{"candidates_token_count":15,"prompt_token_count":955,"prompt_tokens_details":[{"modality":"TEXT","token_count":955}],"thoughts_token_count":65,"total_token_count":1035}}
-----------------------------------------------------------

core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85a3c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85a3c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85a3c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85a3c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85a3c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85a3c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85a3c0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85a3c0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85a3c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85a3c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85a3c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85a3c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85a3c0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85a3c0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85a3c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85a3c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85a3c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85a3c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85a3c0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('fe9fb712-bf2d-479c-9943-beef4dcc33cd', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-ebe3d49c-d665-4513-83a8-aa050119411b', 'ottawa_public_health_agent', <memory at 0x10b81d540>, '[]', None, '2025-11-30 13:45:06.903642', '{"parts": [{"function_call": {"id": "adk-db295e15-eab6-41b8-ba55-4fa4d973f257", "args": {"request": "current weather"}, "name": "ResearchAgent"}, "thought_signature": "CtgCAXLI2nzIjgdzbBnI2DzJSe26nEK6h-NsGXwJIp3LvTU0-B-yT89xBB0te4LJMo1EaO3KOk7yacyoOJIC6U5LObPe-AOHKfFQtT3SB_CAoSqggYqn4yAg6eLYYiQFxkMOtYEPfSiCZqv4j8xvoRSMU1dHeY7UxTibr6i_YYqRNWvXAoQS7PH3wT2BaVqr4GNy70wMDoCFIxXBVclpkFMqyffYPo_ikaRrLnxxurf1rQPJlQYn98z17NsnEknLFB6FY5xikykGd28HZ-hveY4rgUw-n4Tgg-wLcVQmWgkVwDmdeq1rs0ZiggPf1XGuuo2As8PKRq7fsDU4Bh6KSxf9dBcEUOKEoZgP4RcynuYxP5-lFvFK1IU35n4ps3OyOo9FoofIPlIN8LfLDxo_ma2Q8li5ixaVYFyUSl0U_Ny_m5WBLYlryMFfjTl69_ywbISMPDvm4dBha2s="}], "role": "model"}', None, None, '{"candidates_token_count": 15, "prompt_token_count": 955, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 955}], "thoughts_token_count": 65, "total_token_count": 1035}', None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85a3c0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('fe9fb712-bf2d-479c-9943-beef4dcc33cd', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-ebe3d49c-d665-4513-83a8-aa050119411b', 'ottawa_public_health_agent', <memory at 0x10b81d540>, '[]', None, '2025-11-30 13:45:06.903642', '{"parts": [{"function_call": {"id": "adk-db295e15-eab6-41b8-ba55-4fa4d973f257", "args": {"request": "current weather"}, "name": "ResearchAgent"}, "thought_signature": "CtgCAXLI2nzIjgdzbBnI2DzJSe26nEK6h-NsGXwJIp3LvTU0-B-yT89xBB0te4LJMo1EaO3KOk7yacyoOJIC6U5LObPe-AOHKfFQtT3SB_CAoSqggYqn4yAg6eLYYiQFxkMOtYEPfSiCZqv4j8xvoRSMU1dHeY7UxTibr6i_YYqRNWvXAoQS7PH3wT2BaVqr4GNy70wMDoCFIxXBVclpkFMqyffYPo_ikaRrLnxxurf1rQPJlQYn98z17NsnEknLFB6FY5xikykGd28HZ-hveY4rgUw-n4Tgg-wLcVQmWgkVwDmdeq1rs0ZiggPf1XGuuo2As8PKRq7fsDU4Bh6KSxf9dBcEUOKEoZgP4RcynuYxP5-lFvFK1IU35n4ps3OyOo9FoofIPlIN8LfLDxo_ma2Q8li5ixaVYFyUSl0U_Ny_m5WBLYlryMFfjTl69_ywbISMPDvm4dBha2s="}], "role": "model"}', None, None, '{"candidates_token_count": 15, "prompt_token_count": 955, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 955}], "thoughts_token_count": 65, "total_token_count": 1035}', None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85a3c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85a3c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85a940>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85a940>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85a940>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85a940>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85a940>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85a940>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
runners.py:270 WARNING:App name mismatch detected. The runner is configured with app name "ottawa_public_health_agent", but the root agent was loaded from "/Users/leo/projects/kaggle/ottawa-public-health-agent/.venv/lib/python3.12/site-packages/google/adk/agents", which implies app name "agents".
google_llm.py:163 INFO:Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
google_llm.py:169 DEBUG:
LLM Request:
-----------------------------------------------------------
System Instruction:
You are an expert Research Specialist. Your role is to provide accurate, verified information from external sources.
    
    CURRENT TIME CONTEXT: Operate in timezone America/Toronto for Ottawa, Canada. Compute "now" at response time using the system clock (example snapshot: 2025-11-30 13:44:55 EST).

    STRICT SCOPE CONSTRAINTS:
    - You are PROHIBITED from answering questions regarding **CURRENT** outbreaks in ANY of the following Ottawa facilities:
      1. Camp
      2. Congregate Care
      3. Communal Living Facility
      4. Correctional Facility
      5. Group Home
      6. Supportive Living
      7. Hospice
      8. Hospital
      9. Licensed Child Care Facility/ Daycare
      10. Long Term Care Home
      11. Retirement Home
      12. Rooming House
      13. Elementary School
      14. Secondary School
      15. Post Secondary School
      16. Shelter
      17. Supported Independent Living
      (These queries must be handled by the specialized Health Data Agent).
      
    - You **MUST** handle questions about:
      - Historical Ottawa health data, statistics, and trends.
      - Public Health structure, leadership, and general news.
      - Outbreaks in private settings NOT listed above.
      - General facts that are NOT specific medical/health advice (e.g. "Who is the medical officer of health?", "When was OPH founded?").

    OPERATIONAL PROTOCOLS:
    1. FACTUAL QUERIES (e.g., Weather, Time, General Knowledge):
       - You are operating in Ottawa, Canada. Your internal clock is set to America/Toronto (provided above).
       - Use the provided CURRENT TIME as the absolute ground truth for "now" in Ottawa. DO NOT SEARCH FOR THE LOCAL TIME.
       - For questions involving OTHER TIMEZONES (e.g. "what time is it in Tokyo"), you MUST execute a `google_search`.
       - Execute a search if necessary for other facts.
       - Provide a DIRECT, CONCISE answer.
       - Do NOT include citations or superfluous context.

    2. COMPLEX RESEARCH (e.g., News, Blog Posts, Articles, Reports, White Papers, etc.):
       - Conduct a thorough search to identify 2-3 high-authority sources.
       - Output ONLY the raw key findings with strict citations.
       - DO NOT summarize or synthesize the information. Your output will be consumed by a downstream Summarizer Agent.
    

You are an agent. Your internal name is "ResearchAgent".
-----------------------------------------------------------
Config:
{}
-----------------------------------------------------------
Contents:
{"parts":[{"text":"current weather"}],"role":"user"}
-----------------------------------------------------------
Functions:

-----------------------------------------------------------

models.py:7027 INFO:AFC is enabled with max remote calls: 10.
google_llm.py:219 INFO:Response received from the model.
google_llm.py:220 DEBUG:
LLM Response:
-----------------------------------------------------------
Text:
The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow.
-----------------------------------------------------------
Function calls:

-----------------------------------------------------------
Raw response:
{"sdk_http_response":{"headers":{"Content-Type":"application/json; charset=UTF-8","Vary":"Origin, X-Origin, Referer","Content-Encoding":"gzip","Date":"Sun, 30 Nov 2025 18:45:12 GMT","Server":"scaffolding on HTTPServer2","X-XSS-Protection":"0","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Server-Timing":"gfet4t7; dur=4200","Alt-Svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","Transfer-Encoding":"chunked"}},"candidates":[{"content":{"parts":[{"text":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}],"role":"model"},"finish_reason":"STOP","grounding_metadata":{"grounding_chunks":[{"web":{"title":"theweathernetwork.com","uri":"https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQGz00x4vVoAlQX6WhgJuol0TToC5y91CmFePj8MSqV8QklhdPG-eHKzv8MmyEE4Pvak9OtFQjwa_By-x218mf5FAg3Xa333JlYZkyMePLB61Fyuz72MJf6Pe0TFUtkgI896MLo7aPUQ2UrmzqehtYgc8ViR0j7sc4P7gEipwg=="}}],"grounding_supports":[{"grounding_chunk_indices":[0],"segment":{"end_index":105,"text":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}}],"search_entry_point":{"rendered_content":"<style>\n.container {\n  align-items: center;\n  border-radius: 8px;\n  display: flex;\n  font-family: Google Sans, Roboto, sans-serif;\n  font-size: 14px;\n  line-height: 20px;\n  padding: 8px 12px;\n}\n.chip {\n  display: inline-block;\n  border: solid 1px;\n  border-radius: 16px;\n  min-width: 14px;\n  padding: 5px 16px;\n  text-align: center;\n  user-select: none;\n  margin: 0 8px;\n  -webkit-tap-highlight-color: transparent;\n}\n.carousel {\n  overflow: auto;\n  scrollbar-width: none;\n  white-space: nowrap;\n  margin-right: -12px;\n}\n.headline {\n  display: flex;\n  margin-right: 4px;\n}\n.gradient-container {\n  position: relative;\n}\n.gradient {\n  position: absolute;\n  transform: translate(3px, -9px);\n  height: 36px;\n  width: 9px;\n}\n@media (prefers-color-scheme: light) {\n  .container {\n    background-color: #fafafa;\n    box-shadow: 0 0 0 1px #0000000f;\n  }\n  .headline-label {\n    color: #1f1f1f;\n  }\n  .chip {\n    background-color: #ffffff;\n    border-color: #d2d2d2;\n    color: #5e5e5e;\n    text-decoration: none;\n  }\n  .chip:hover {\n    background-color: #f2f2f2;\n  }\n  .chip:focus {\n    background-color: #f2f2f2;\n  }\n  .chip:active {\n    background-color: #d8d8d8;\n    border-color: #b6b6b6;\n  }\n  .logo-dark {\n    display: none;\n  }\n  .gradient {\n    background: linear-gradient(90deg, #fafafa 15%, #fafafa00 100%);\n  }\n}\n@media (prefers-color-scheme: dark) {\n  .container {\n    background-color: #1f1f1f;\n    box-shadow: 0 0 0 1px #ffffff26;\n  }\n  .headline-label {\n    color: #fff;\n  }\n  .chip {\n    background-color: #2c2c2c;\n    border-color: #3c4043;\n    color: #fff;\n    text-decoration: none;\n  }\n  .chip:hover {\n    background-color: #353536;\n  }\n  .chip:focus {\n    background-color: #353536;\n  }\n  .chip:active {\n    background-color: #464849;\n    border-color: #53575b;\n  }\n  .logo-light {\n    display: none;\n  }\n  .gradient {\n    background: linear-gradient(90deg, #1f1f1f 15%, #1f1f1f00 100%);\n  }\n}\n</style>\n<div class=\"container\">\n  <div class=\"headline\">\n    <svg class=\"logo-light\" width=\"18\" height=\"18\" viewBox=\"9 9 35 35\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M42.8622 27.0064C42.8622 25.7839 42.7525 24.6084 42.5487 23.4799H26.3109V30.1568H35.5897C35.1821 32.3041 33.9596 34.1222 32.1258 35.3448V39.6864H37.7213C40.9814 36.677 42.8622 32.2571 42.8622 27.0064V27.0064Z\" fill=\"#4285F4\"/>\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.3109 43.8555C30.9659 43.8555 34.8687 42.3195 37.7213 39.6863L32.1258 35.3447C30.5898 36.3792 28.6306 37.0061 26.3109 37.0061C21.8282 37.0061 18.0195 33.9811 16.6559 29.906H10.9194V34.3573C13.7563 39.9841 19.5712 43.8555 26.3109 43.8555V43.8555Z\" fill=\"#34A853\"/>\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M16.6559 29.8904C16.3111 28.8559 16.1074 27.7588 16.1074 26.6146C16.1074 25.4704 16.3111 24.3733 16.6559 23.3388V18.8875H10.9194C9.74388 21.2072 9.06992 23.8247 9.06992 26.6146C9.06992 29.4045 9.74388 32.022 10.9194 34.3417L15.3864 30.8621L16.6559 29.8904V29.8904Z\" fill=\"#FBBC05\"/>\n      <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M26.3109 16.2386C28.85 16.2386 31.107 17.1164 32.9095 18.8091L37.8466 13.8719C34.853 11.082 30.9659 9.3736 26.3109 9.3736C19.5712 9.3736 13.7563 13.245 10.9194 18.8875L16.6559 23.3388C18.0195 19.2636 21.8282 16.2386 26.3109 16.2386V16.2386Z\" fill=\"#EA4335\"/>\n    </svg>\n    <svg class=\"logo-dark\" width=\"18\" height=\"18\" viewBox=\"0 0 48 48\" xmlns=\"http://www.w3.org/2000/svg\">\n      <circle cx=\"24\" cy=\"23\" fill=\"#FFF\" r=\"22\"/>\n      <path d=\"M33.76 34.26c2.75-2.56 4.49-6.37 4.49-11.26 0-.89-.08-1.84-.29-3H24.01v5.99h8.03c-.4 2.02-1.5 3.56-3.07 4.56v.75l3.91 2.97h.88z\" fill=\"#4285F4\"/>\n      <path d=\"M15.58 25.77A8.845 8.845 0 0 0 24 31.86c1.92 0 3.62-.46 4.97-1.31l4.79 3.71C31.14 36.7 27.65 38 24 38c-5.93 0-11.01-3.4-13.45-8.36l.17-1.01 4.06-2.85h.8z\" fill=\"#34A853\"/>\n      <path d=\"M15.59 20.21a8.864 8.864 0 0 0 0 5.58l-5.03 3.86c-.98-2-1.53-4.25-1.53-6.64 0-2.39.55-4.64 1.53-6.64l1-.22 3.81 2.98.22 1.08z\" fill=\"#FBBC05\"/>\n      <path d=\"M24 14.14c2.11 0 4.02.75 5.52 1.98l4.36-4.36C31.22 9.43 27.81 8 24 8c-5.93 0-11.01 3.4-13.45 8.36l5.03 3.85A8.86 8.86 0 0 1 24 14.14z\" fill=\"#EA4335\"/>\n    </svg>\n    <div class=\"gradient-container\"><div class=\"gradient\"></div></div>\n  </div>\n  <div class=\"carousel\">\n    <a class=\"chip\" href=\"https://vertexaisearch.cloud.google.com/grounding-api-redirect/AUZIYQHAwCovk94yNCfqYG7YWJ_H2Ae3ovVmQqrdUgg5ziEteQ8Yksxhu-cSX33si1rILVeDJv-xPcnzjk5q7KDQE0F8bGLVX974rUfbed9jKtSubH-WWx23KCsjW18x7Psg5uYLjGF17tCCqmlhsXYuJTCxmzfLJPODyQuGC68tx30d603jwBzPDWUeRsMZXA-6cgEJqS8auLVFt3W4TIQf5YM=\">current weather Ottawa Canada</a>\n  </div>\n</div>\n"},"web_search_queries":["current weather Ottawa Canada"]},"index":0}],"model_version":"gemini-2.5-flash","response_id":"uJAsaf2pFaHUjrEPjbA6","usage_metadata":{"candidates_token_count":51,"prompt_token_count":577,"prompt_tokens_details":[{"modality":"TEXT","token_count":577}],"thoughts_token_count":595,"tool_use_prompt_token_count":648,"tool_use_prompt_tokens_details":[{"modality":"TEXT","token_count":648}],"total_token_count":1871},"automatic_function_calling_history":[]}
-----------------------------------------------------------

runners.py:1346 INFO:Closing runner...
runners.py:1354 INFO:Runner closed.
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859140>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859140>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b859140>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b859140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859140>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859140>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859140>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b859140>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b859140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859140>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859140>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859140>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b859140>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b859140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859140>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859140>, 'UPDATE sessions SET state=?, update_time=CURRENT_TIMESTAMP WHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('{"research_findings": "The current weather in Ottawa, Canada is -1\\u00b0C, feeling like -6\\u00b0C, with an 80% chance of 0.4 cm of snow."}', 'ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859140>, 'UPDATE sessions SET state=?, update_time=CURRENT_TIMESTAMP WHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('{"research_findings": "The current weather in Ottawa, Canada is -1\\u00b0C, feeling like -6\\u00b0C, with an 80% chance of 0.4 cm of snow."}', 'ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859140>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859140>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('60205232-6de1-477d-b0b0-5fb6d89a228f', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-ebe3d49c-d665-4513-83a8-aa050119411b', 'ottawa_public_health_agent', <memory at 0x10b81d600>, None, None, '2025-11-30 13:45:12.418540', '{"parts": [{"function_response": {"id": "adk-db295e15-eab6-41b8-ba55-4fa4d973f257", "name": "ResearchAgent", "response": {"result": "The current weather in Ottawa, Canada is -1\\u00b0C, feeling like -6\\u00b0C, with an 80% chance of 0.4 cm of snow."}}}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859140>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('60205232-6de1-477d-b0b0-5fb6d89a228f', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-ebe3d49c-d665-4513-83a8-aa050119411b', 'ottawa_public_health_agent', <memory at 0x10b81d600>, None, None, '2025-11-30 13:45:12.418540', '{"parts": [{"function_response": {"id": "adk-db295e15-eab6-41b8-ba55-4fa4d973f257", "name": "ResearchAgent", "response": {"result": "The current weather in Ottawa, Canada is -1\\u00b0C, feeling like -6\\u00b0C, with an 80% chance of 0.4 cm of snow."}}}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859140>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bbc0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bbc0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85bbc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85bbc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bbc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bbc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
google_llm.py:163 INFO:Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
google_llm.py:169 DEBUG:
LLM Request:
-----------------------------------------------------------
System Instruction:
Your purpose is to orchestrate a team of specialized agents in order to answer any user query, with particular expertise in Ottawa Public Health outbreak information.
    You should also engage in helpful conversation and remember details the user shares with you (like their name).
    
    CURRENT TIME CONTEXT: Operate in timezone America/Toronto for Ottawa, Canada.
    IMPORTANT: For any question about time/date/timezone, delegate to the `TimeAgent`.

    AVAILABLE SPECIALISTS:

    AVAILABLE SPECIALISTS:
    1. `RetrieveHealthDataAgent`: Fetches CURRENT Ottawa Public Health facility outbreak reports. Use this for questions about **active/recent outbreaks** in:
       1) Camp
       2) Congregate Care
       3) Communal Living Facility
       4) Correctional Facility
       5) Group Home
       6) Supportive Living
       7) Hospice
       8) Hospital
       9) Licensed Child Care Facility/ Daycare
      10) Long Term Care Home
      11) Retirement Home
      12) Rooming House
      13) Elementary School
      14) Secondary School
      15) Post Secondary School
      16) Shelter
      17) Supported Independent Living
    2. `HealthAdviceAgent`: Use this for:
       - **Visitor Advice**: Official OPH guidelines for visiting facilities with outbreaks.
       - **Health/Disease Inquiries**: Questions about Communicable Diseases (symptoms, prevention, treatment) or General Public Health.
       (Note: This agent handles its own research for health topics, so do NOT call `ResearchAgent` separately for these).
    3. `ResearchAgent`: Searches the web. Use this for:
       - **General Facts & Knowledge**: History, News, Leadership, Statistics.
       - **Non-Advice Public Health**: Questions like "Who is the head of OPH?" or "History of pandemics".
       - (Note: Do NOT use for specific disease advice/symptoms; use `HealthAdviceAgent` instead).
       - (Note: Do NOT use for active outbreaks in the facilities listed above; use `RetrieveHealthDataAgent`).
    4. `DataAnalystAgent`: Analyzes data. Call this for **ANY** math, calculations, date arithmetic (if relative to a known date), or code execution tasks.
    5. `SummarizerAgent`: Synthesizes reports. Use this ONLY for complex multi-source data aggregation.
    6. `TimeAgent`: Fetches the current date and time. Use this for questions like "What time is it?", "What is today's date?", etc.

    WORKFLOW PROTOCOL:
    1. **Outbreak Data**: If user asks for active outbreaks in ANY monitored facility (LTC, Schools, Hospitals, Shelters, etc.):
       Call `RetrieveHealthDataAgent`.
       THEN call `HealthAdviceAgent` to provide visitor safety advice.
       THEN return the combined result yourself.
    2. **Health/Disease ADVICE**: If user asks for guidance on diseases, symptoms, prevention, or what to do, call `HealthAdviceAgent` directly.
       Return the advice provided by the agent.
    3. **General Research**: For other topics (non public health related), call `ResearchAgent`.
       Return the findings directly.
    4. **Analysis**: For math/stats/logic/data analysis/programming, call `DataAnalystAgent`.
       Return the analysis result directly.
    

You are an agent. Your internal name is "ottawa_public_health_agent".
-----------------------------------------------------------
Config:
{'tools': [{}]}
-----------------------------------------------------------
Contents:
{"parts":[{"text":"what is the weather"}],"role":"user"}
{"parts":[{"function_call":{"args":{"request":"current weather"},"name":"ResearchAgent"},"thought_signature":"CtgCAXLI2nzIjgdzbBnI2DzJSe26nEK6h-NsGXwJIp3LvTU0-B-yT89xBB0te4LJMo1EaO3KOk7yacyoOJIC6U5LObPe-AOHKfFQtT3SB_CAoSqggYqn4yAg6eLYYiQFxkMOtYEPfSiCZqv4j8xvoRSMU1dHeY7UxTibr6i_YYqRNWvXAoQS7PH3wT2BaVqr4GNy70wMDoCFIxXBVclpkFMqyffYPo_ikaRrLnxxurf1rQPJlQYn98z17NsnEknLFB6FY5xikykGd28HZ-hveY4rgUw-n4Tgg-wLcVQmWgkVwDmdeq1rs0ZiggPf1XGuuo2As8PKRq7fsDU4Bh6KSxf9dBcEUOKEoZgP4RcynuYxP5-lFvFK1IU35n4ps3OyOo9FoofIPlIN8LfLDxo_ma2Q8li5ixaVYFyUSl0U_Ny_m5WBLYlryMFfjTl69_ywbISMPDvm4dBha2s="}],"role":"model"}
{"parts":[{"function_response":{"name":"ResearchAgent","response":{"result":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}}}],"role":"user"}
-----------------------------------------------------------
Functions:
RetrieveHealthDataAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
ResearchAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
DataAnalystAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
SummarizerAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
HealthAdviceAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
TimeAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
-----------------------------------------------------------

google_llm.py:219 INFO:Response received from the model.
google_llm.py:220 DEBUG:
LLM Response:
-----------------------------------------------------------
Text:
The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow.
-----------------------------------------------------------
Function calls:

-----------------------------------------------------------
Raw response:
{"sdk_http_response":{"headers":{"Content-Type":"application/json; charset=UTF-8","Vary":"Origin, X-Origin, Referer","Content-Encoding":"gzip","Date":"Sun, 30 Nov 2025 18:45:13 GMT","Server":"scaffolding on HTTPServer2","X-XSS-Protection":"0","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Server-Timing":"gfet4t7; dur=643","Alt-Svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","Transfer-Encoding":"chunked"}},"candidates":[{"content":{"parts":[{"text":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}],"role":"model"},"finish_reason":"STOP","index":0}],"model_version":"gemini-2.5-flash","response_id":"uZAsaZLrB-vR-8YPv9bl8AQ","usage_metadata":{"cache_tokens_details":[{"modality":"TEXT","token_count":689}],"cached_content_token_count":689,"candidates_token_count":36,"prompt_token_count":1019,"prompt_tokens_details":[{"modality":"TEXT","token_count":1019}],"total_token_count":1055}}
-----------------------------------------------------------

core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b140>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b140>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b140>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b140>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b140>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b140>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b140>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b140>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b140>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b140>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b140>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b140>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b140>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('3dddeb0b-9f50-439e-bdc5-398f91b6ad80', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-ebe3d49c-d665-4513-83a8-aa050119411b', 'ottawa_public_health_agent', <memory at 0x10b81d240>, None, None, '2025-11-30 13:45:12.428888', '{"parts": [{"text": "The current weather in Ottawa, Canada is -1\\u00b0C, feeling like -6\\u00b0C, with an 80% chance of 0.4 cm of snow."}], "role": "model"}', None, None, '{"cache_tokens_details": [{"modality": "TEXT", "token_count": 689}], "cached_content_token_count": 689, "candidates_token_count": 36, "prompt_token_count": 1019, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 1019}], "total_token_count": 1055}', None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b140>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('3dddeb0b-9f50-439e-bdc5-398f91b6ad80', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-ebe3d49c-d665-4513-83a8-aa050119411b', 'ottawa_public_health_agent', <memory at 0x10b81d240>, None, None, '2025-11-30 13:45:12.428888', '{"parts": [{"text": "The current weather in Ottawa, Canada is -1\\u00b0C, feeling like -6\\u00b0C, with an 80% chance of 0.4 cm of snow."}], "role": "model"}', None, None, '{"cache_tokens_details": [{"modality": "TEXT", "token_count": 689}], "cached_content_token_count": 689, "candidates_token_count": 36, "prompt_token_count": 1019, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 1019}], "total_token_count": 1055}', None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b140>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bf40>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bf40>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85bf40>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85bf40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bf40>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bf40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
runners.py:448 DEBUG:Running event compactor.
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8589c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8589c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8589c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8589c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8589c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8589c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8589c0>, 'SELECT events.id, events.app_name, events.user_id, events.session_id, events.invocation_id, events.author, events.actions, events.long_running_tool_ids_json, events.branch, events.timestamp, events.content, events.grounding_metadata, events.custom_metadata, events.usage_metadata, events.citation_metadata, events.partial, events.turn_complete, events.error_code, events.error_message, events.interrupted, events.input_transcription, events.output_transcription \nFROM events \nWHERE events.app_name = ? AND events.session_id = ? AND events.user_id = ? ORDER BY events.timestamp DESC', ('ottawa_public_health_agent', 'my_session_id', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8589c0>, 'SELECT events.id, events.app_name, events.user_id, events.session_id, events.invocation_id, events.author, events.actions, events.long_running_tool_ids_json, events.branch, events.timestamp, events.content, events.grounding_metadata, events.custom_metadata, events.usage_metadata, events.citation_metadata, events.partial, events.turn_complete, events.error_code, events.error_message, events.interrupted, events.input_transcription, events.output_transcription \nFROM events \nWHERE events.app_name = ? AND events.session_id = ? AND events.user_id = ? ORDER BY events.timestamp DESC', ('ottawa_public_health_agent', 'my_session_id', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8589c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8589c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8589c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8589c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8589c0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8589c0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8589c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8589c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8589c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8589c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8589c0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8589c0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8589c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8589c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8589c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8589c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859440>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859440>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b859440>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b859440>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859440>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859440>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859440>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859440>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b859440>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b859440>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859440>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859440>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859440>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859440>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b859440>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b859440>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859440>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859440>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859440>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('2e3ac58f-6577-4df4-8d4a-4f3cec0e99b5', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-c7fb7dd7-8d4f-43c2-8e07-24e4c68d0d50', 'user', <memory at 0x10b81cdc0>, None, None, '2025-11-30 13:45:38.621404', '{"parts": [{"text": "what is my current location"}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859440>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('2e3ac58f-6577-4df4-8d4a-4f3cec0e99b5', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-c7fb7dd7-8d4f-43c2-8e07-24e4c68d0d50', 'user', <memory at 0x10b81cdc0>, None, None, '2025-11-30 13:45:38.621404', '{"parts": [{"text": "what is my current location"}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859440>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859440>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bd40>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bd40>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85bd40>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85bd40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bd40>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bd40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
google_llm.py:163 INFO:Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
google_llm.py:169 DEBUG:
LLM Request:
-----------------------------------------------------------
System Instruction:
Your purpose is to orchestrate a team of specialized agents in order to answer any user query, with particular expertise in Ottawa Public Health outbreak information.
    You should also engage in helpful conversation and remember details the user shares with you (like their name).
    
    CURRENT TIME CONTEXT: Operate in timezone America/Toronto for Ottawa, Canada.
    IMPORTANT: For any question about time/date/timezone, delegate to the `TimeAgent`.

    AVAILABLE SPECIALISTS:

    AVAILABLE SPECIALISTS:
    1. `RetrieveHealthDataAgent`: Fetches CURRENT Ottawa Public Health facility outbreak reports. Use this for questions about **active/recent outbreaks** in:
       1) Camp
       2) Congregate Care
       3) Communal Living Facility
       4) Correctional Facility
       5) Group Home
       6) Supportive Living
       7) Hospice
       8) Hospital
       9) Licensed Child Care Facility/ Daycare
      10) Long Term Care Home
      11) Retirement Home
      12) Rooming House
      13) Elementary School
      14) Secondary School
      15) Post Secondary School
      16) Shelter
      17) Supported Independent Living
    2. `HealthAdviceAgent`: Use this for:
       - **Visitor Advice**: Official OPH guidelines for visiting facilities with outbreaks.
       - **Health/Disease Inquiries**: Questions about Communicable Diseases (symptoms, prevention, treatment) or General Public Health.
       (Note: This agent handles its own research for health topics, so do NOT call `ResearchAgent` separately for these).
    3. `ResearchAgent`: Searches the web. Use this for:
       - **General Facts & Knowledge**: History, News, Leadership, Statistics.
       - **Non-Advice Public Health**: Questions like "Who is the head of OPH?" or "History of pandemics".
       - (Note: Do NOT use for specific disease advice/symptoms; use `HealthAdviceAgent` instead).
       - (Note: Do NOT use for active outbreaks in the facilities listed above; use `RetrieveHealthDataAgent`).
    4. `DataAnalystAgent`: Analyzes data. Call this for **ANY** math, calculations, date arithmetic (if relative to a known date), or code execution tasks.
    5. `SummarizerAgent`: Synthesizes reports. Use this ONLY for complex multi-source data aggregation.
    6. `TimeAgent`: Fetches the current date and time. Use this for questions like "What time is it?", "What is today's date?", etc.

    WORKFLOW PROTOCOL:
    1. **Outbreak Data**: If user asks for active outbreaks in ANY monitored facility (LTC, Schools, Hospitals, Shelters, etc.):
       Call `RetrieveHealthDataAgent`.
       THEN call `HealthAdviceAgent` to provide visitor safety advice.
       THEN return the combined result yourself.
    2. **Health/Disease ADVICE**: If user asks for guidance on diseases, symptoms, prevention, or what to do, call `HealthAdviceAgent` directly.
       Return the advice provided by the agent.
    3. **General Research**: For other topics (non public health related), call `ResearchAgent`.
       Return the findings directly.
    4. **Analysis**: For math/stats/logic/data analysis/programming, call `DataAnalystAgent`.
       Return the analysis result directly.
    

You are an agent. Your internal name is "ottawa_public_health_agent".
-----------------------------------------------------------
Config:
{'tools': [{}]}
-----------------------------------------------------------
Contents:
{"parts":[{"text":"what is the weather"}],"role":"user"}
{"parts":[{"function_call":{"args":{"request":"current weather"},"name":"ResearchAgent"},"thought_signature":"CtgCAXLI2nzIjgdzbBnI2DzJSe26nEK6h-NsGXwJIp3LvTU0-B-yT89xBB0te4LJMo1EaO3KOk7yacyoOJIC6U5LObPe-AOHKfFQtT3SB_CAoSqggYqn4yAg6eLYYiQFxkMOtYEPfSiCZqv4j8xvoRSMU1dHeY7UxTibr6i_YYqRNWvXAoQS7PH3wT2BaVqr4GNy70wMDoCFIxXBVclpkFMqyffYPo_ikaRrLnxxurf1rQPJlQYn98z17NsnEknLFB6FY5xikykGd28HZ-hveY4rgUw-n4Tgg-wLcVQmWgkVwDmdeq1rs0ZiggPf1XGuuo2As8PKRq7fsDU4Bh6KSxf9dBcEUOKEoZgP4RcynuYxP5-lFvFK1IU35n4ps3OyOo9FoofIPlIN8LfLDxo_ma2Q8li5ixaVYFyUSl0U_Ny_m5WBLYlryMFfjTl69_ywbISMPDvm4dBha2s="}],"role":"model"}
{"parts":[{"function_response":{"name":"ResearchAgent","response":{"result":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}}}],"role":"user"}
{"parts":[{"text":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}],"role":"model"}
{"parts":[{"text":"what is my current location"}],"role":"user"}
-----------------------------------------------------------
Functions:
RetrieveHealthDataAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
ResearchAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
DataAnalystAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
SummarizerAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
HealthAdviceAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
TimeAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
-----------------------------------------------------------

google_llm.py:219 INFO:Response received from the model.
google_llm.py:220 DEBUG:
LLM Response:
-----------------------------------------------------------
Text:
I am sorry, I cannot determine your current location. As an AI, I do not have access to your personal information or location data.
-----------------------------------------------------------
Function calls:

-----------------------------------------------------------
Raw response:
{"sdk_http_response":{"headers":{"Content-Type":"application/json; charset=UTF-8","Vary":"Origin, X-Origin, Referer","Content-Encoding":"gzip","Date":"Sun, 30 Nov 2025 18:45:39 GMT","Server":"scaffolding on HTTPServer2","X-XSS-Protection":"0","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Server-Timing":"gfet4t7; dur=1075","Alt-Svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","Transfer-Encoding":"chunked"}},"candidates":[{"content":{"parts":[{"text":"I am sorry, I cannot determine your current location. As an AI, I do not have access to your personal information or location data.","thought_signature":"CroEAXLI2nx2aY9VyFygK6YI1oWveGSqVI3Xr5fx27vDX5VcRLxfl3OZGtbXQNze7Ch3voPsqM2_UGuVDsrs0rXAX_6RCdweLaYtf6Be-tuUXsJwYdbNJMEN9I91e51kiLuMHusnNjckI0L0nujX8T2zDhNtUZBw3MpVCGL1Nt-hsz6tGhMRnsX9JaqdJF0S06F14ZicsWPMkNayB6CkKd8viB5OAf1YEVzJhsIjmwqpCJzjNiOfwKIBMfi1xbzmOzTwNSMw3lYMHn84-XZHumVKjtOZgpBcAeUsc-Kk7UBS4fLBkK0beJHMzzFZnabFjPennlLDU_pP0e5ulS-Qw7wAE3TkFI8lRlrSS29RNlNMDnKlxkvmHxPVOQpK_5VWdfTcKkRTJ__lI23Bv7JoKNVC8fuWlRG3D_hrP2k7k6AjCih2aps1YmIygJnq_84qrkX3yqWJhcBLngnuhswshUnsBGrAtjLSVdOzM3Gud7cJt3-gr__YKVVaVDYMUfTmz60T2KMm9bYctFkz7-PL8hKE_clfmrrnHXjINftQoEceL2XGIS9UiVCARtRNzmV1eEM2aXp1l3Jmunlq2l0Es_r5Nuy4bQ7M6TqzTZqnHlJZau6tLdvwoWIuH5ymjpEQoRi06R4FsyRhZRwMb81NxjWmxvl4DAyifCmlosw6pwnXvlF8Z0ABXEqL-_8C62pr6qfJXP_GwrwR1ISHuTQux1EM9baUxMWbeceROnkk0YsUjpLCgLyf4gwVMoD7"}],"role":"model"},"finish_reason":"STOP","index":0}],"model_version":"gemini-2.5-flash","response_id":"05AsaZ2bMuGe-8YPyN2qkA0","usage_metadata":{"candidates_token_count":28,"prompt_token_count":1062,"prompt_tokens_details":[{"modality":"TEXT","token_count":1062}],"thoughts_token_count":109,"total_token_count":1199}}
-----------------------------------------------------------

core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8072c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8072c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8072c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8072c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8072c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8072c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b0c0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b0c0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b0c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b0c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b0c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b0c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b0c0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b0c0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b0c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b0c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b0c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b0c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b0c0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('a80ebea4-e2e9-4235-b275-287f879ec474', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-c7fb7dd7-8d4f-43c2-8e07-24e4c68d0d50', 'ottawa_public_health_agent', <memory at 0x10b81d900>, None, None, '2025-11-30 13:45:38.630139', '{"parts": [{"text": "I am sorry, I cannot determine your current location. As an AI, I do not have access to your personal information or location data.", "thought_signature": "CroEAXLI2nx2aY9VyFygK6YI1oWveGSqVI3Xr5fx27vDX5VcRLxfl3OZGtbXQNze7Ch3voPsqM2_UGuVDsrs0rXAX_6RCdweLaYtf6Be-tuUXsJwYdbNJMEN9I91e51kiLuMHusnNjckI0L0nujX8T2zDhNtUZBw3MpVCGL1Nt-hsz6tGhMRnsX9JaqdJF0S06F14ZicsWPMkNayB6CkKd8viB5OAf1YEVzJhsIjmwqpCJzjNiOfwKIBMfi1xbzmOzTwNSMw3lYMHn84-XZHumVKjtOZgpBcAeUsc-Kk7UBS4fLBkK0beJHMzzFZnabFjPennlLDU_pP0e5ulS-Qw7wAE3TkFI8lRlrSS29RNlNMDnKlxkvmHxPVOQpK_5VWdfTcKkRTJ__lI23Bv7JoKNVC8fuWlRG3D_hrP2k7k6AjCih2aps1YmIygJnq_84qrkX3yqWJhcBLngnuhswshUnsBGrAtjLSVdOzM3Gud7cJt3-gr__YKVVaVDYMUfTmz60T2KMm9bYctFkz7-PL8hKE_clfmrrnHXjINftQoEceL2XGIS9UiVCARtRNzmV1eEM2aXp1l3Jmunlq2l0Es_r5Nuy4bQ7M6TqzTZqnHlJZau6tLdvwoWIuH5ymjpEQoRi06R4FsyRhZRwMb81NxjWmxvl4DAyifCmlosw6pwnXvlF8Z0ABXEqL-_8C62pr6qfJXP_GwrwR1ISHuTQux1EM9baUxMWbeceROnkk0YsUjpLCgLyf4gwVMoD7"}], "role": "model"}', None, None, '{"candidates_token_count": 28, "prompt_token_count": 1062, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 1062}], "thoughts_token_count": 109, "total_token_count": 1199}', None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b0c0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('a80ebea4-e2e9-4235-b275-287f879ec474', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-c7fb7dd7-8d4f-43c2-8e07-24e4c68d0d50', 'ottawa_public_health_agent', <memory at 0x10b81d900>, None, None, '2025-11-30 13:45:38.630139', '{"parts": [{"text": "I am sorry, I cannot determine your current location. As an AI, I do not have access to your personal information or location data.", "thought_signature": "CroEAXLI2nx2aY9VyFygK6YI1oWveGSqVI3Xr5fx27vDX5VcRLxfl3OZGtbXQNze7Ch3voPsqM2_UGuVDsrs0rXAX_6RCdweLaYtf6Be-tuUXsJwYdbNJMEN9I91e51kiLuMHusnNjckI0L0nujX8T2zDhNtUZBw3MpVCGL1Nt-hsz6tGhMRnsX9JaqdJF0S06F14ZicsWPMkNayB6CkKd8viB5OAf1YEVzJhsIjmwqpCJzjNiOfwKIBMfi1xbzmOzTwNSMw3lYMHn84-XZHumVKjtOZgpBcAeUsc-Kk7UBS4fLBkK0beJHMzzFZnabFjPennlLDU_pP0e5ulS-Qw7wAE3TkFI8lRlrSS29RNlNMDnKlxkvmHxPVOQpK_5VWdfTcKkRTJ__lI23Bv7JoKNVC8fuWlRG3D_hrP2k7k6AjCih2aps1YmIygJnq_84qrkX3yqWJhcBLngnuhswshUnsBGrAtjLSVdOzM3Gud7cJt3-gr__YKVVaVDYMUfTmz60T2KMm9bYctFkz7-PL8hKE_clfmrrnHXjINftQoEceL2XGIS9UiVCARtRNzmV1eEM2aXp1l3Jmunlq2l0Es_r5Nuy4bQ7M6TqzTZqnHlJZau6tLdvwoWIuH5ymjpEQoRi06R4FsyRhZRwMb81NxjWmxvl4DAyifCmlosw6pwnXvlF8Z0ABXEqL-_8C62pr6qfJXP_GwrwR1ISHuTQux1EM9baUxMWbeceROnkk0YsUjpLCgLyf4gwVMoD7"}], "role": "model"}', None, None, '{"candidates_token_count": 28, "prompt_token_count": 1062, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 1062}], "thoughts_token_count": 109, "total_token_count": 1199}', None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b0c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b0c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b884040>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b884040>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b884040>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b884040>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b884040>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b884040>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
runners.py:448 DEBUG:Running event compactor.
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b4c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b4c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b4c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b4c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b4c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b4c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b807e40>, 'SELECT events.id, events.app_name, events.user_id, events.session_id, events.invocation_id, events.author, events.actions, events.long_running_tool_ids_json, events.branch, events.timestamp, events.content, events.grounding_metadata, events.custom_metadata, events.usage_metadata, events.citation_metadata, events.partial, events.turn_complete, events.error_code, events.error_message, events.interrupted, events.input_transcription, events.output_transcription \nFROM events \nWHERE events.app_name = ? AND events.session_id = ? AND events.user_id = ? ORDER BY events.timestamp DESC', ('ottawa_public_health_agent', 'my_session_id', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b807e40>, 'SELECT events.id, events.app_name, events.user_id, events.session_id, events.invocation_id, events.author, events.actions, events.long_running_tool_ids_json, events.branch, events.timestamp, events.content, events.grounding_metadata, events.custom_metadata, events.usage_metadata, events.citation_metadata, events.partial, events.turn_complete, events.error_code, events.error_message, events.interrupted, events.input_transcription, events.output_transcription \nFROM events \nWHERE events.app_name = ? AND events.session_id = ? AND events.user_id = ? ORDER BY events.timestamp DESC', ('ottawa_public_health_agent', 'my_session_id', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b807e40>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b807e40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b807e40>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b807e40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b807e40>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b807e40>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b807e40>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b807e40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b807e40>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b807e40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b807e40>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b807e40>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b807e40>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b807e40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b807e40>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b807e40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8079c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8079c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8079c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8079c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8079c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8079c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8079c0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8079c0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8079c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8079c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8079c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8079c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8079c0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8079c0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8079c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8079c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8079c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8079c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8079c0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('11b6d0c0-f132-43e0-ba14-24636a299069', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'user', <memory at 0x10b81d240>, None, None, '2025-11-30 13:49:02.133448', '{"parts": [{"text": "A flight is going to take off in 35 minutes from now, from Toronto to beijing. It will take 13 hours and 45 minutes to land. What is the date and time in Bejing by the time the flight lands."}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8079c0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('11b6d0c0-f132-43e0-ba14-24636a299069', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'user', <memory at 0x10b81d240>, None, None, '2025-11-30 13:49:02.133448', '{"parts": [{"text": "A flight is going to take off in 35 minutes from now, from Toronto to beijing. It will take 13 hours and 45 minutes to land. What is the date and time in Bejing by the time the flight lands."}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8079c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8079c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b540>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b540>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b540>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b540>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b540>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b540>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
google_llm.py:163 INFO:Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
google_llm.py:169 DEBUG:
LLM Request:
-----------------------------------------------------------
System Instruction:
Your purpose is to orchestrate a team of specialized agents in order to answer any user query, with particular expertise in Ottawa Public Health outbreak information.
    You should also engage in helpful conversation and remember details the user shares with you (like their name).
    
    CURRENT TIME CONTEXT: Operate in timezone America/Toronto for Ottawa, Canada.
    IMPORTANT: For any question about time/date/timezone, delegate to the `TimeAgent`.

    AVAILABLE SPECIALISTS:

    AVAILABLE SPECIALISTS:
    1. `RetrieveHealthDataAgent`: Fetches CURRENT Ottawa Public Health facility outbreak reports. Use this for questions about **active/recent outbreaks** in:
       1) Camp
       2) Congregate Care
       3) Communal Living Facility
       4) Correctional Facility
       5) Group Home
       6) Supportive Living
       7) Hospice
       8) Hospital
       9) Licensed Child Care Facility/ Daycare
      10) Long Term Care Home
      11) Retirement Home
      12) Rooming House
      13) Elementary School
      14) Secondary School
      15) Post Secondary School
      16) Shelter
      17) Supported Independent Living
    2. `HealthAdviceAgent`: Use this for:
       - **Visitor Advice**: Official OPH guidelines for visiting facilities with outbreaks.
       - **Health/Disease Inquiries**: Questions about Communicable Diseases (symptoms, prevention, treatment) or General Public Health.
       (Note: This agent handles its own research for health topics, so do NOT call `ResearchAgent` separately for these).
    3. `ResearchAgent`: Searches the web. Use this for:
       - **General Facts & Knowledge**: History, News, Leadership, Statistics.
       - **Non-Advice Public Health**: Questions like "Who is the head of OPH?" or "History of pandemics".
       - (Note: Do NOT use for specific disease advice/symptoms; use `HealthAdviceAgent` instead).
       - (Note: Do NOT use for active outbreaks in the facilities listed above; use `RetrieveHealthDataAgent`).
    4. `DataAnalystAgent`: Analyzes data. Call this for **ANY** math, calculations, date arithmetic (if relative to a known date), or code execution tasks.
    5. `SummarizerAgent`: Synthesizes reports. Use this ONLY for complex multi-source data aggregation.
    6. `TimeAgent`: Fetches the current date and time. Use this for questions like "What time is it?", "What is today's date?", etc.

    WORKFLOW PROTOCOL:
    1. **Outbreak Data**: If user asks for active outbreaks in ANY monitored facility (LTC, Schools, Hospitals, Shelters, etc.):
       Call `RetrieveHealthDataAgent`.
       THEN call `HealthAdviceAgent` to provide visitor safety advice.
       THEN return the combined result yourself.
    2. **Health/Disease ADVICE**: If user asks for guidance on diseases, symptoms, prevention, or what to do, call `HealthAdviceAgent` directly.
       Return the advice provided by the agent.
    3. **General Research**: For other topics (non public health related), call `ResearchAgent`.
       Return the findings directly.
    4. **Analysis**: For math/stats/logic/data analysis/programming, call `DataAnalystAgent`.
       Return the analysis result directly.
    

You are an agent. Your internal name is "ottawa_public_health_agent".
-----------------------------------------------------------
Config:
{'tools': [{}]}
-----------------------------------------------------------
Contents:
{"parts":[{"text":"what is the weather"}],"role":"user"}
{"parts":[{"function_call":{"args":{"request":"current weather"},"name":"ResearchAgent"},"thought_signature":"CtgCAXLI2nzIjgdzbBnI2DzJSe26nEK6h-NsGXwJIp3LvTU0-B-yT89xBB0te4LJMo1EaO3KOk7yacyoOJIC6U5LObPe-AOHKfFQtT3SB_CAoSqggYqn4yAg6eLYYiQFxkMOtYEPfSiCZqv4j8xvoRSMU1dHeY7UxTibr6i_YYqRNWvXAoQS7PH3wT2BaVqr4GNy70wMDoCFIxXBVclpkFMqyffYPo_ikaRrLnxxurf1rQPJlQYn98z17NsnEknLFB6FY5xikykGd28HZ-hveY4rgUw-n4Tgg-wLcVQmWgkVwDmdeq1rs0ZiggPf1XGuuo2As8PKRq7fsDU4Bh6KSxf9dBcEUOKEoZgP4RcynuYxP5-lFvFK1IU35n4ps3OyOo9FoofIPlIN8LfLDxo_ma2Q8li5ixaVYFyUSl0U_Ny_m5WBLYlryMFfjTl69_ywbISMPDvm4dBha2s="}],"role":"model"}
{"parts":[{"function_response":{"name":"ResearchAgent","response":{"result":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}}}],"role":"user"}
{"parts":[{"text":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}],"role":"model"}
{"parts":[{"text":"what is my current location"}],"role":"user"}
{"parts":[{"text":"I am sorry, I cannot determine your current location. As an AI, I do not have access to your personal information or location data.","thought_signature":"CroEAXLI2nx2aY9VyFygK6YI1oWveGSqVI3Xr5fx27vDX5VcRLxfl3OZGtbXQNze7Ch3voPsqM2_UGuVDsrs0rXAX_6RCdweLaYtf6Be-tuUXsJwYdbNJMEN9I91e51kiLuMHusnNjckI0L0nujX8T2zDhNtUZBw3MpVCGL1Nt-hsz6tGhMRnsX9JaqdJF0S06F14ZicsWPMkNayB6CkKd8viB5OAf1YEVzJhsIjmwqpCJzjNiOfwKIBMfi1xbzmOzTwNSMw3lYMHn84-XZHumVKjtOZgpBcAeUsc-Kk7UBS4fLBkK0beJHMzzFZnabFjPennlLDU_pP0e5ulS-Qw7wAE3TkFI8lRlrSS29RNlNMDnKlxkvmHxPVOQpK_5VWdfTcKkRTJ__lI23Bv7JoKNVC8fuWlRG3D_hrP2k7k6AjCih2aps1YmIygJnq_84qrkX3yqWJhcBLngnuhswshUnsBGrAtjLSVdOzM3Gud7cJt3-gr__YKVVaVDYMUfTmz60T2KMm9bYctFkz7-PL8hKE_clfmrrnHXjINftQoEceL2XGIS9UiVCARtRNzmV1eEM2aXp1l3Jmunlq2l0Es_r5Nuy4bQ7M6TqzTZqnHlJZau6tLdvwoWIuH5ymjpEQoRi06R4FsyRhZRwMb81NxjWmxvl4DAyifCmlosw6pwnXvlF8Z0ABXEqL-_8C62pr6qfJXP_GwrwR1ISHuTQux1EM9baUxMWbeceROnkk0YsUjpLCgLyf4gwVMoD7"}],"role":"model"}
{"parts":[{"text":"A flight is going to take off in 35 minutes from now, from Toronto to beijing. It will take 13 hours and 45 minutes to land. What is the date and time in Bejing by the time the flight lands."}],"role":"user"}
-----------------------------------------------------------
Functions:
RetrieveHealthDataAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
ResearchAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
DataAnalystAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
SummarizerAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
HealthAdviceAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
TimeAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
-----------------------------------------------------------

google_llm.py:219 INFO:Response received from the model.
google_llm.py:220 DEBUG:
LLM Response:
-----------------------------------------------------------
Text:
None
-----------------------------------------------------------
Function calls:
name: TimeAgent, args: {'request': 'current date and time in Toronto'}
-----------------------------------------------------------
Raw response:
{"sdk_http_response":{"headers":{"Content-Type":"application/json; charset=UTF-8","Vary":"Origin, X-Origin, Referer","Content-Encoding":"gzip","Date":"Sun, 30 Nov 2025 18:49:04 GMT","Server":"scaffolding on HTTPServer2","X-XSS-Protection":"0","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Server-Timing":"gfet4t7; dur=1866","Alt-Svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","Transfer-Encoding":"chunked"}},"candidates":[{"content":{"parts":[{"function_call":{"args":{"request":"current date and time in Toronto"},"name":"TimeAgent"},"thought_signature":"CoMJAXLI2nyeZUnePYBTJ8jVDw21x8lPcG8FKfiPOFNwLJOSJw3npZZ7DqsxDEoDOfcdrkrEeHiRDzl_eiylarlwKCh85774t5GVfT4Kzt7NVGEQyMxQgCBOeQdZs8S1ybF_lvbcZypzUgy5CDeCQou4HHcASITZJe7BYO897rSQ-BZT7V4l20NtSD-6nIAvfhdbYsK2RarJ3ICYpjINwejKk4l58M3iN_ehzo6pncWX4FB4uw7SnUS5E0Xlf0CXZ4SlvB5qCZHbiypXoqDQA1gzbSKbptFJpa-h8JvkjPo-lifh3bLcGrvyoicSl9xX9Hi-F6ga0Y-VNnY2NUWloW0yYcXXMpSrgQKtCCdI_nR-YIqpnD1inuP_Q0upUHrz2h4brZ0GNGyLyYIY7YdipwFmQUmtG2U6exxdxVhzXQJgdi0wjzgs-Is-rynSHDlFsR4qe6GSQYe35N5KHt-61wlBvk1zOvdWVZn_HrQkuq-oLkbswRok7W30U6XpicCSTN9pWCmrHAp3zEs-6qMyQKpl8HHLwl8ohxCwfFdBa5uqgIyOkitNF4rrhpUG_uw7i5ZtAVpu2enHxbBXDksI1pzk6Uyzhafs9GOKvEBQ8No43zd4Tz4Xk-imXqfPgrrbgTN1RiSkdPU96i2BE77UBHrASTZd4vwH-m68c0Yf9V8i5VyjXj9RgMNAXtMH-sqlph8EdwjQhPa9yxkZMz25mHuOR8o5WNK1zQ-36xLCMkhbRrzmeGCBZfDhZZ_G0qkDKb2j_jEB-ohWtDTF8JAy25APpFMg5Uf-wgyhLPX2mprB58BLjq3lSVJlmC5FYVuXAdhVX3Vy71V_8EN9gAC5BVr7VG8hmygvf3Elf6Jd_KgMWclkqVPE29SSmcDftr1yotqjzXdE3qeRcJGgbOVnzt3eeSTnJpN4dDBVjdH8FTx85spfICB9mW9UIrkK2pAEfdGDy-pXqVs-IIdb5sG80A0TvsBYBaCZWrKrtwV7u_zsNXznVkZ2hGItKz9b6Y2bIlt-OeuxZdmquFPm6p5jjiX5LGhXnOXirCHi4HtJj4iuZafl_bKL5TgKZOj-1LehDwKKEo5Eq3OdU5kK-5YnfVRLE-lVbMVM4aN-si0fReUHZ1wYnVaVYJiPnhcO13Zdm23VkKbyIgJURLIXvcTJLAf61CSZF5yOGQHcq_h9wZEOZr_JrX4zCO0eF44kSMBxKktb5mpBxXwla0ECvmVsu8aBaJgAeNlKy443HUNtpWmUbmPFUm3R4Wu7R4yslmHa1mLqB2BnZDxEZkZIxojC4MRttaZUWHLTMhMVINRP-IuJwBv0WInHTCbM1uvbDMYTwQumD2kxi9e9H1VA8d77iAa4SZTRUX9aYn-AkNU_IHfEoiiFm177xokovq-Sm72-qUyN9wVayDg1ZUT4HZERYS6iKHjFIcZ3d5_XL3lf0_tCM6YdoWqFskbI8QvfS2EdxiSTkjPvm3KVJzENl5fmf6sjBqgFs3RTsOJQFJnMyOvjRDRXg5qnrZVm2zmlemnF2boEUGZe"}],"role":"model"},"finish_reason":"STOP","index":0}],"model_version":"gemini-2.5-flash","response_id":"oJEsacCbCKyFjrEPk5zomQ0","usage_metadata":{"candidates_token_count":19,"prompt_token_count":1144,"prompt_tokens_details":[{"modality":"TEXT","token_count":1144}],"thoughts_token_count":256,"total_token_count":1419}}
-----------------------------------------------------------

core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bec0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bec0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85bec0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85bec0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bec0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bec0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bec0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bec0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85bec0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85bec0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bec0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bec0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bec0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bec0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85bec0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85bec0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bec0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bec0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bec0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('77f5583c-c20e-464d-a774-156a276da1ae', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81d9c0>, '[]', None, '2025-11-30 13:49:02.141630', '{"parts": [{"function_call": {"id": "adk-0f828ecc-c0c4-4a49-af38-dcd8cc0397fd", "args": {"request": "current date and time in Toronto"}, "name": "TimeAgent"}, "thought_signature": "CoMJAXLI2nyeZUnePYBTJ8jVDw21x8lPcG8FKfiPOFNwLJOSJw3npZZ7DqsxDEoDOfcdrkrEeHiRDzl_eiylarlwKCh85774t5GVfT4Kzt7NVGEQyMxQgCBOeQdZs8S1ybF_lvbcZypzUgy5CDeCQou4HHcASITZJe7BYO897rSQ-BZT7V4l20NtSD-6nIAvfhdbYsK2RarJ3ICYpjINwejKk4l58M3iN_ehzo6pncWX4FB4uw7SnUS5E0Xlf0CXZ4SlvB5qCZHbiypXoqDQA1gzbSKbptFJpa-h8JvkjPo-lifh3bLcGrvyoicSl9xX9Hi-F6ga0Y-VNnY2NUWloW0yYcXXMpSrgQKtCCdI_nR-YIqpnD1inuP_Q0upUHrz2h4brZ0GNGyLyYIY7YdipwFmQUmtG2U6exxdxVhzXQJgdi0wjzgs-Is-rynSHDlFsR4qe6GSQYe35N5KHt-61wlBvk1zOvdWVZn_HrQkuq-oLkbswRok7W30U6XpicCSTN9pWCmrHAp3zEs-6qMyQKpl8HHLwl8ohxCwfFdBa5uqgIyOkitNF4rrhpUG_uw7i5ZtAVpu2enHxbBXDksI1pzk6Uyzhafs9GOKvEBQ8No43zd4Tz4Xk-imXqfPgrrbgTN1RiSkdPU96i2BE77UBHrASTZd4vwH-m68c0Yf9V8i5VyjXj9RgMNAXtMH-sqlph8EdwjQhPa9yxkZMz25mHuOR8o5WNK1zQ-36xLCMkhbRrzmeGCBZfDhZZ_G0qkDKb2j_jEB-ohWtDTF8JAy25APpFMg5Uf-wgyhLPX2mprB58BLjq3lSVJlmC5FYVuXAdhVX3Vy71V_8EN9gAC5BVr7VG8hmygvf3Elf6Jd_KgMWclkqVPE29SSmcDftr1yotqjzXdE3qeRcJGgbOVnzt3eeSTnJpN4dDBVjdH8FTx85spfICB9mW9UIrkK2pAEfdGDy-pXqVs-IIdb5sG80A0TvsBYBaCZWrKrtwV7u_zsNXznVkZ2hGItKz9b6Y2bIlt-OeuxZdmquFPm6p5jjiX5LGhXnOXirCHi4HtJj4iuZafl_bKL5TgKZOj-1LehDwKKEo5Eq3OdU5kK-5YnfVRLE-lVbMVM4aN-si0fReUHZ1wYnVaVYJiPnhcO13Zdm23VkKbyIgJURLIXvcTJLAf61CSZF5yOGQHcq_h9wZEOZr_JrX4zCO0eF44kSMBxKktb5mpBxXwla0ECvmVsu8aBaJgAeNlKy443HUNtpWmUbmPFUm3R4Wu7R4yslmHa1mLqB2BnZDxEZkZIxojC4MRttaZUWHLTMhMVINRP-IuJwBv0WInHTCbM1uvbDMYTwQumD2kxi9e9H1VA8d77iAa4SZTRUX9aYn-AkNU_IHfEoiiFm177xokovq-Sm72-qUyN9wVayDg1ZUT4HZERYS6iKHjFIcZ3d5_XL3lf0_tCM6YdoWqFskbI8QvfS2EdxiSTkjPvm3KVJzENl5fmf6sjBqgFs3RTsOJQFJnMyOvjRDRXg5qnrZVm2zmlemnF2boEUGZe"}], "role": "model"}', None, None, '{"candidates_token_count": 19, "prompt_token_count": 1144, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 1144}], "thoughts_token_count": 256, "total_token_count": 1419}', None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bec0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('77f5583c-c20e-464d-a774-156a276da1ae', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81d9c0>, '[]', None, '2025-11-30 13:49:02.141630', '{"parts": [{"function_call": {"id": "adk-0f828ecc-c0c4-4a49-af38-dcd8cc0397fd", "args": {"request": "current date and time in Toronto"}, "name": "TimeAgent"}, "thought_signature": "CoMJAXLI2nyeZUnePYBTJ8jVDw21x8lPcG8FKfiPOFNwLJOSJw3npZZ7DqsxDEoDOfcdrkrEeHiRDzl_eiylarlwKCh85774t5GVfT4Kzt7NVGEQyMxQgCBOeQdZs8S1ybF_lvbcZypzUgy5CDeCQou4HHcASITZJe7BYO897rSQ-BZT7V4l20NtSD-6nIAvfhdbYsK2RarJ3ICYpjINwejKk4l58M3iN_ehzo6pncWX4FB4uw7SnUS5E0Xlf0CXZ4SlvB5qCZHbiypXoqDQA1gzbSKbptFJpa-h8JvkjPo-lifh3bLcGrvyoicSl9xX9Hi-F6ga0Y-VNnY2NUWloW0yYcXXMpSrgQKtCCdI_nR-YIqpnD1inuP_Q0upUHrz2h4brZ0GNGyLyYIY7YdipwFmQUmtG2U6exxdxVhzXQJgdi0wjzgs-Is-rynSHDlFsR4qe6GSQYe35N5KHt-61wlBvk1zOvdWVZn_HrQkuq-oLkbswRok7W30U6XpicCSTN9pWCmrHAp3zEs-6qMyQKpl8HHLwl8ohxCwfFdBa5uqgIyOkitNF4rrhpUG_uw7i5ZtAVpu2enHxbBXDksI1pzk6Uyzhafs9GOKvEBQ8No43zd4Tz4Xk-imXqfPgrrbgTN1RiSkdPU96i2BE77UBHrASTZd4vwH-m68c0Yf9V8i5VyjXj9RgMNAXtMH-sqlph8EdwjQhPa9yxkZMz25mHuOR8o5WNK1zQ-36xLCMkhbRrzmeGCBZfDhZZ_G0qkDKb2j_jEB-ohWtDTF8JAy25APpFMg5Uf-wgyhLPX2mprB58BLjq3lSVJlmC5FYVuXAdhVX3Vy71V_8EN9gAC5BVr7VG8hmygvf3Elf6Jd_KgMWclkqVPE29SSmcDftr1yotqjzXdE3qeRcJGgbOVnzt3eeSTnJpN4dDBVjdH8FTx85spfICB9mW9UIrkK2pAEfdGDy-pXqVs-IIdb5sG80A0TvsBYBaCZWrKrtwV7u_zsNXznVkZ2hGItKz9b6Y2bIlt-OeuxZdmquFPm6p5jjiX5LGhXnOXirCHi4HtJj4iuZafl_bKL5TgKZOj-1LehDwKKEo5Eq3OdU5kK-5YnfVRLE-lVbMVM4aN-si0fReUHZ1wYnVaVYJiPnhcO13Zdm23VkKbyIgJURLIXvcTJLAf61CSZF5yOGQHcq_h9wZEOZr_JrX4zCO0eF44kSMBxKktb5mpBxXwla0ECvmVsu8aBaJgAeNlKy443HUNtpWmUbmPFUm3R4Wu7R4yslmHa1mLqB2BnZDxEZkZIxojC4MRttaZUWHLTMhMVINRP-IuJwBv0WInHTCbM1uvbDMYTwQumD2kxi9e9H1VA8d77iAa4SZTRUX9aYn-AkNU_IHfEoiiFm177xokovq-Sm72-qUyN9wVayDg1ZUT4HZERYS6iKHjFIcZ3d5_XL3lf0_tCM6YdoWqFskbI8QvfS2EdxiSTkjPvm3KVJzENl5fmf6sjBqgFs3RTsOJQFJnMyOvjRDRXg5qnrZVm2zmlemnF2boEUGZe"}], "role": "model"}', None, None, '{"candidates_token_count": 19, "prompt_token_count": 1144, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 1144}], "thoughts_token_count": 256, "total_token_count": 1419}', None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bec0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bec0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b894240>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b894240>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b894240>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b894240>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b894240>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b894240>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
runners.py:270 WARNING:App name mismatch detected. The runner is configured with app name "ottawa_public_health_agent", but the root agent was loaded from "/Users/leo/projects/kaggle/ottawa-public-health-agent/.venv/lib/python3.12/site-packages/google/adk/agents", which implies app name "agents".
google_llm.py:163 INFO:Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
google_llm.py:169 DEBUG:
LLM Request:
-----------------------------------------------------------
System Instruction:
You are a Time Specialist.
    
    PRIMARY OBJECTIVE:
    - Provide the current date and time for Ottawa, Canada (America/Toronto).
    - You MUST use the `get_current_time_tool` to fetch the accurate current time.
    - Do NOT rely on your internal knowledge or system prompt for the time.
    

You are an agent. Your internal name is "TimeAgent".
-----------------------------------------------------------
Config:
{'tools': [{}]}
-----------------------------------------------------------
Contents:
{"parts":[{"text":"current date and time in Toronto"}],"role":"user"}
-----------------------------------------------------------
Functions:
get_current_time_tool: {} 
-----------------------------------------------------------

google_llm.py:219 INFO:Response received from the model.
google_llm.py:220 DEBUG:
LLM Response:
-----------------------------------------------------------
Text:
None
-----------------------------------------------------------
Function calls:
name: get_current_time_tool, args: {}
-----------------------------------------------------------
Raw response:
{"sdk_http_response":{"headers":{"Content-Type":"application/json; charset=UTF-8","Vary":"Origin, X-Origin, Referer","Content-Encoding":"gzip","Date":"Sun, 30 Nov 2025 18:49:05 GMT","Server":"scaffolding on HTTPServer2","X-XSS-Protection":"0","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Server-Timing":"gfet4t7; dur=791","Alt-Svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","Transfer-Encoding":"chunked"}},"candidates":[{"content":{"parts":[{"function_call":{"args":{},"name":"get_current_time_tool"},"thought_signature":"CuECAXLI2ny8xo-I680L2iWl2R4nj_KJRAPdzKypIbEZlskl7ZXf64oWQl7qY8hhC7ACJIjlVD42L7m9uY2_YxQiqc0CFq_sXzdJHL7YqHGTUtQ9kPb0WUsDKfkrxPWQnDx86Yk3P0vHdXMdyxtPATjmNdSt_gYUwjx5AjoF2NQFSYDoqmghReoRtPK1C-mqkHDVlWbd_TFpOJ8JKJNo5Ka4yngfrL9d__PJD5UxPuO3mpGio2pX3K6etSs5MDxPe6ipi_syU0EB5rJ6SQBmxVZisyS6Nyrzy-rpDagT418BfmynyRgztJko8d6gqIdcitONfDJHbEi38xIPa239mCy3bo-tCbUoq22fkpSlAjVpjCcZjHgzcRe9eeIRGa5HMdGFk4YnA1RaY57rmSNst_BIhs4rZlPv5vPG-NciV0bTKxvpgvjm1fdAvKMMI8YqTl0tyox0PbDW3azoJ0_n4CHs7KQ="}],"role":"model"},"finish_reason":"STOP","index":0}],"model_version":"gemini-2.5-flash","response_id":"oZEsaYC-BYqa-8YPhsqFiA0","usage_metadata":{"candidates_token_count":14,"prompt_token_count":136,"prompt_tokens_details":[{"modality":"TEXT","token_count":136}],"thoughts_token_count":76,"total_token_count":226}}
-----------------------------------------------------------

google_llm.py:163 INFO:Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
google_llm.py:169 DEBUG:
LLM Request:
-----------------------------------------------------------
System Instruction:
You are a Time Specialist.
    
    PRIMARY OBJECTIVE:
    - Provide the current date and time for Ottawa, Canada (America/Toronto).
    - You MUST use the `get_current_time_tool` to fetch the accurate current time.
    - Do NOT rely on your internal knowledge or system prompt for the time.
    

You are an agent. Your internal name is "TimeAgent".
-----------------------------------------------------------
Config:
{'tools': [{}]}
-----------------------------------------------------------
Contents:
{"parts":[{"text":"current date and time in Toronto"}],"role":"user"}
{"parts":[{"function_call":{"args":{},"name":"get_current_time_tool"},"thought_signature":"CuECAXLI2ny8xo-I680L2iWl2R4nj_KJRAPdzKypIbEZlskl7ZXf64oWQl7qY8hhC7ACJIjlVD42L7m9uY2_YxQiqc0CFq_sXzdJHL7YqHGTUtQ9kPb0WUsDKfkrxPWQnDx86Yk3P0vHdXMdyxtPATjmNdSt_gYUwjx5AjoF2NQFSYDoqmghReoRtPK1C-mqkHDVlWbd_TFpOJ8JKJNo5Ka4yngfrL9d__PJD5UxPuO3mpGio2pX3K6etSs5MDxPe6ipi_syU0EB5rJ6SQBmxVZisyS6Nyrzy-rpDagT418BfmynyRgztJko8d6gqIdcitONfDJHbEi38xIPa239mCy3bo-tCbUoq22fkpSlAjVpjCcZjHgzcRe9eeIRGa5HMdGFk4YnA1RaY57rmSNst_BIhs4rZlPv5vPG-NciV0bTKxvpgvjm1fdAvKMMI8YqTl0tyox0PbDW3azoJ0_n4CHs7KQ="}],"role":"model"}
{"parts":[{"function_response":{"name":"get_current_time_tool","response":{"result":"2025-11-30 13:49:05 EST"}}}],"role":"user"}
-----------------------------------------------------------
Functions:
get_current_time_tool: {} 
-----------------------------------------------------------

google_llm.py:219 INFO:Response received from the model.
google_llm.py:220 DEBUG:
LLM Response:
-----------------------------------------------------------
Text:
The current date and time in Toronto, Canada is 2025-11-30 13:49:05 EST.
-----------------------------------------------------------
Function calls:

-----------------------------------------------------------
Raw response:
{"sdk_http_response":{"headers":{"Content-Type":"application/json; charset=UTF-8","Vary":"Origin, X-Origin, Referer","Content-Encoding":"gzip","Date":"Sun, 30 Nov 2025 18:49:06 GMT","Server":"scaffolding on HTTPServer2","X-XSS-Protection":"0","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Server-Timing":"gfet4t7; dur=887","Alt-Svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","Transfer-Encoding":"chunked"}},"candidates":[{"content":{"parts":[{"text":"The current date and time in Toronto, Canada is 2025-11-30 13:49:05 EST.","thought_signature":"CoUCAXLI2nxSAjkzA8_5HNWLRm5NtD7YF1kNgPg2RFYB4r7enuAfNI6jnqNGffuJ0WyBndRK9BQ27e2M0zHuAbl6hN0OPsPHBAbj6trNP5uJ4ifuK6SYKRF7mTTTpQtyHmwxSBTlr37buuIMG8NxhLqfmUT3U77PlOTLRFcfqvmTJRPjoBD7fADA5im-dsehS-LnlpfpV1dEAtBB5eWY3RrnME29VniERaRn3tddKy7yzdhPelkKsBpWDAiTTARmy7ZI1759A_KQxHLkFlidpmsQZV-XCvv5nTBoUL0yb-8e-5EvHfKVwiyJbrKYL2lkrhBwvpapNEsthfaaD2_Y4Ymygli-9hrf"}],"role":"model"},"finish_reason":"STOP","index":0}],"model_version":"gemini-2.5-flash","response_id":"opEsabieAafI-8YP4PGbsQ4","usage_metadata":{"candidates_token_count":32,"prompt_token_count":188,"prompt_tokens_details":[{"modality":"TEXT","token_count":188}],"thoughts_token_count":68,"total_token_count":288}}
-----------------------------------------------------------

runners.py:1346 INFO:Closing runner...
runners.py:1354 INFO:Runner closed.
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b895040>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b895040>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b895040>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b895040>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b895040>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b895040>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b858cc0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b858cc0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b858cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b858cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b858cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b858cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b858cc0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b858cc0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b858cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b858cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b858cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b858cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b858cc0>, 'UPDATE sessions SET state=?, update_time=CURRENT_TIMESTAMP WHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('{"research_findings": "The current weather in Ottawa, Canada is -1\\u00b0C, feeling like -6\\u00b0C, with an 80% chance of 0.4 cm of snow.", "current_time": "The current date and time in Toronto, Canada is 2025-11-30 13:49:05 EST."}', 'ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b858cc0>, 'UPDATE sessions SET state=?, update_time=CURRENT_TIMESTAMP WHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('{"research_findings": "The current weather in Ottawa, Canada is -1\\u00b0C, feeling like -6\\u00b0C, with an 80% chance of 0.4 cm of snow.", "current_time": "The current date and time in Toronto, Canada is 2025-11-30 13:49:05 EST."}', 'ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b858cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b858cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b858cc0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('5eeb59b2-cbc6-4297-a5e0-d389853cc20d', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81d180>, None, None, '2025-11-30 13:49:05.983127', '{"parts": [{"function_response": {"id": "adk-0f828ecc-c0c4-4a49-af38-dcd8cc0397fd", "name": "TimeAgent", "response": {"result": "The current date and time in Toronto, Canada is 2025-11-30 13:49:05 EST."}}}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b858cc0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('5eeb59b2-cbc6-4297-a5e0-d389853cc20d', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81d180>, None, None, '2025-11-30 13:49:05.983127', '{"parts": [{"function_response": {"id": "adk-0f828ecc-c0c4-4a49-af38-dcd8cc0397fd", "name": "TimeAgent", "response": {"result": "The current date and time in Toronto, Canada is 2025-11-30 13:49:05 EST."}}}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b858cc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b858cc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b894dc0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b894dc0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b894dc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b894dc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b894dc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b894dc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
google_llm.py:163 INFO:Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
google_llm.py:169 DEBUG:
LLM Request:
-----------------------------------------------------------
System Instruction:
Your purpose is to orchestrate a team of specialized agents in order to answer any user query, with particular expertise in Ottawa Public Health outbreak information.
    You should also engage in helpful conversation and remember details the user shares with you (like their name).
    
    CURRENT TIME CONTEXT: Operate in timezone America/Toronto for Ottawa, Canada.
    IMPORTANT: For any question about time/date/timezone, delegate to the `TimeAgent`.

    AVAILABLE SPECIALISTS:

    AVAILABLE SPECIALISTS:
    1. `RetrieveHealthDataAgent`: Fetches CURRENT Ottawa Public Health facility outbreak reports. Use this for questions about **active/recent outbreaks** in:
       1) Camp
       2) Congregate Care
       3) Communal Living Facility
       4) Correctional Facility
       5) Group Home
       6) Supportive Living
       7) Hospice
       8) Hospital
       9) Licensed Child Care Facility/ Daycare
      10) Long Term Care Home
      11) Retirement Home
      12) Rooming House
      13) Elementary School
      14) Secondary School
      15) Post Secondary School
      16) Shelter
      17) Supported Independent Living
    2. `HealthAdviceAgent`: Use this for:
       - **Visitor Advice**: Official OPH guidelines for visiting facilities with outbreaks.
       - **Health/Disease Inquiries**: Questions about Communicable Diseases (symptoms, prevention, treatment) or General Public Health.
       (Note: This agent handles its own research for health topics, so do NOT call `ResearchAgent` separately for these).
    3. `ResearchAgent`: Searches the web. Use this for:
       - **General Facts & Knowledge**: History, News, Leadership, Statistics.
       - **Non-Advice Public Health**: Questions like "Who is the head of OPH?" or "History of pandemics".
       - (Note: Do NOT use for specific disease advice/symptoms; use `HealthAdviceAgent` instead).
       - (Note: Do NOT use for active outbreaks in the facilities listed above; use `RetrieveHealthDataAgent`).
    4. `DataAnalystAgent`: Analyzes data. Call this for **ANY** math, calculations, date arithmetic (if relative to a known date), or code execution tasks.
    5. `SummarizerAgent`: Synthesizes reports. Use this ONLY for complex multi-source data aggregation.
    6. `TimeAgent`: Fetches the current date and time. Use this for questions like "What time is it?", "What is today's date?", etc.

    WORKFLOW PROTOCOL:
    1. **Outbreak Data**: If user asks for active outbreaks in ANY monitored facility (LTC, Schools, Hospitals, Shelters, etc.):
       Call `RetrieveHealthDataAgent`.
       THEN call `HealthAdviceAgent` to provide visitor safety advice.
       THEN return the combined result yourself.
    2. **Health/Disease ADVICE**: If user asks for guidance on diseases, symptoms, prevention, or what to do, call `HealthAdviceAgent` directly.
       Return the advice provided by the agent.
    3. **General Research**: For other topics (non public health related), call `ResearchAgent`.
       Return the findings directly.
    4. **Analysis**: For math/stats/logic/data analysis/programming, call `DataAnalystAgent`.
       Return the analysis result directly.
    

You are an agent. Your internal name is "ottawa_public_health_agent".
-----------------------------------------------------------
Config:
{'tools': [{}]}
-----------------------------------------------------------
Contents:
{"parts":[{"text":"what is the weather"}],"role":"user"}
{"parts":[{"function_call":{"args":{"request":"current weather"},"name":"ResearchAgent"},"thought_signature":"CtgCAXLI2nzIjgdzbBnI2DzJSe26nEK6h-NsGXwJIp3LvTU0-B-yT89xBB0te4LJMo1EaO3KOk7yacyoOJIC6U5LObPe-AOHKfFQtT3SB_CAoSqggYqn4yAg6eLYYiQFxkMOtYEPfSiCZqv4j8xvoRSMU1dHeY7UxTibr6i_YYqRNWvXAoQS7PH3wT2BaVqr4GNy70wMDoCFIxXBVclpkFMqyffYPo_ikaRrLnxxurf1rQPJlQYn98z17NsnEknLFB6FY5xikykGd28HZ-hveY4rgUw-n4Tgg-wLcVQmWgkVwDmdeq1rs0ZiggPf1XGuuo2As8PKRq7fsDU4Bh6KSxf9dBcEUOKEoZgP4RcynuYxP5-lFvFK1IU35n4ps3OyOo9FoofIPlIN8LfLDxo_ma2Q8li5ixaVYFyUSl0U_Ny_m5WBLYlryMFfjTl69_ywbISMPDvm4dBha2s="}],"role":"model"}
{"parts":[{"function_response":{"name":"ResearchAgent","response":{"result":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}}}],"role":"user"}
{"parts":[{"text":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}],"role":"model"}
{"parts":[{"text":"what is my current location"}],"role":"user"}
{"parts":[{"text":"I am sorry, I cannot determine your current location. As an AI, I do not have access to your personal information or location data.","thought_signature":"CroEAXLI2nx2aY9VyFygK6YI1oWveGSqVI3Xr5fx27vDX5VcRLxfl3OZGtbXQNze7Ch3voPsqM2_UGuVDsrs0rXAX_6RCdweLaYtf6Be-tuUXsJwYdbNJMEN9I91e51kiLuMHusnNjckI0L0nujX8T2zDhNtUZBw3MpVCGL1Nt-hsz6tGhMRnsX9JaqdJF0S06F14ZicsWPMkNayB6CkKd8viB5OAf1YEVzJhsIjmwqpCJzjNiOfwKIBMfi1xbzmOzTwNSMw3lYMHn84-XZHumVKjtOZgpBcAeUsc-Kk7UBS4fLBkK0beJHMzzFZnabFjPennlLDU_pP0e5ulS-Qw7wAE3TkFI8lRlrSS29RNlNMDnKlxkvmHxPVOQpK_5VWdfTcKkRTJ__lI23Bv7JoKNVC8fuWlRG3D_hrP2k7k6AjCih2aps1YmIygJnq_84qrkX3yqWJhcBLngnuhswshUnsBGrAtjLSVdOzM3Gud7cJt3-gr__YKVVaVDYMUfTmz60T2KMm9bYctFkz7-PL8hKE_clfmrrnHXjINftQoEceL2XGIS9UiVCARtRNzmV1eEM2aXp1l3Jmunlq2l0Es_r5Nuy4bQ7M6TqzTZqnHlJZau6tLdvwoWIuH5ymjpEQoRi06R4FsyRhZRwMb81NxjWmxvl4DAyifCmlosw6pwnXvlF8Z0ABXEqL-_8C62pr6qfJXP_GwrwR1ISHuTQux1EM9baUxMWbeceROnkk0YsUjpLCgLyf4gwVMoD7"}],"role":"model"}
{"parts":[{"text":"A flight is going to take off in 35 minutes from now, from Toronto to beijing. It will take 13 hours and 45 minutes to land. What is the date and time in Bejing by the time the flight lands."}],"role":"user"}
{"parts":[{"function_call":{"args":{"request":"current date and time in Toronto"},"name":"TimeAgent"},"thought_signature":"CoMJAXLI2nyeZUnePYBTJ8jVDw21x8lPcG8FKfiPOFNwLJOSJw3npZZ7DqsxDEoDOfcdrkrEeHiRDzl_eiylarlwKCh85774t5GVfT4Kzt7NVGEQyMxQgCBOeQdZs8S1ybF_lvbcZypzUgy5CDeCQou4HHcASITZJe7BYO897rSQ-BZT7V4l20NtSD-6nIAvfhdbYsK2RarJ3ICYpjINwejKk4l58M3iN_ehzo6pncWX4FB4uw7SnUS5E0Xlf0CXZ4SlvB5qCZHbiypXoqDQA1gzbSKbptFJpa-h8JvkjPo-lifh3bLcGrvyoicSl9xX9Hi-F6ga0Y-VNnY2NUWloW0yYcXXMpSrgQKtCCdI_nR-YIqpnD1inuP_Q0upUHrz2h4brZ0GNGyLyYIY7YdipwFmQUmtG2U6exxdxVhzXQJgdi0wjzgs-Is-rynSHDlFsR4qe6GSQYe35N5KHt-61wlBvk1zOvdWVZn_HrQkuq-oLkbswRok7W30U6XpicCSTN9pWCmrHAp3zEs-6qMyQKpl8HHLwl8ohxCwfFdBa5uqgIyOkitNF4rrhpUG_uw7i5ZtAVpu2enHxbBXDksI1pzk6Uyzhafs9GOKvEBQ8No43zd4Tz4Xk-imXqfPgrrbgTN1RiSkdPU96i2BE77UBHrASTZd4vwH-m68c0Yf9V8i5VyjXj9RgMNAXtMH-sqlph8EdwjQhPa9yxkZMz25mHuOR8o5WNK1zQ-36xLCMkhbRrzmeGCBZfDhZZ_G0qkDKb2j_jEB-ohWtDTF8JAy25APpFMg5Uf-wgyhLPX2mprB58BLjq3lSVJlmC5FYVuXAdhVX3Vy71V_8EN9gAC5BVr7VG8hmygvf3Elf6Jd_KgMWclkqVPE29SSmcDftr1yotqjzXdE3qeRcJGgbOVnzt3eeSTnJpN4dDBVjdH8FTx85spfICB9mW9UIrkK2pAEfdGDy-pXqVs-IIdb5sG80A0TvsBYBaCZWrKrtwV7u_zsNXznVkZ2hGItKz9b6Y2bIlt-OeuxZdmquFPm6p5jjiX5LGhXnOXirCHi4HtJj4iuZafl_bKL5TgKZOj-1LehDwKKEo5Eq3OdU5kK-5YnfVRLE-lVbMVM4aN-si0fReUHZ1wYnVaVYJiPnhcO13Zdm23VkKbyIgJURLIXvcTJLAf61CSZF5yOGQHcq_h9wZEOZr_JrX4zCO0eF44kSMBxKktb5mpBxXwla0ECvmVsu8aBaJgAeNlKy443HUNtpWmUbmPFUm3R4Wu7R4yslmHa1mLqB2BnZDxEZkZIxojC4MRttaZUWHLTMhMVINRP-IuJwBv0WInHTCbM1uvbDMYTwQumD2kxi9e9H1VA8d77iAa4SZTRUX9aYn-AkNU_IHfEoiiFm177xokovq-Sm72-qUyN9wVayDg1ZUT4HZERYS6iKHjFIcZ3d5_XL3lf0_tCM6YdoWqFskbI8QvfS2EdxiSTkjPvm3KVJzENl5fmf6sjBqgFs3RTsOJQFJnMyOvjRDRXg5qnrZVm2zmlemnF2boEUGZe"}],"role":"model"}
{"parts":[{"function_response":{"name":"TimeAgent","response":{"result":"The current date and time in Toronto, Canada is 2025-11-30 13:49:05 EST."}}}],"role":"user"}
-----------------------------------------------------------
Functions:
RetrieveHealthDataAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
ResearchAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
DataAnalystAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
SummarizerAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
HealthAdviceAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
TimeAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
-----------------------------------------------------------

google_llm.py:219 INFO:Response received from the model.
google_llm.py:220 DEBUG:
LLM Response:
-----------------------------------------------------------
Text:
None
-----------------------------------------------------------
Function calls:
name: DataAnalystAgent, args: {'request': 'A flight is taking off from Toronto at 2025-11-30 13:49:05 EST. It will take off in 35 minutes and the flight duration is 13 hours and 45 minutes. Calculate the landing date and time in Beijing (CST time zone) when the flight lands.'}
-----------------------------------------------------------
Raw response:
{"sdk_http_response":{"headers":{"Content-Type":"application/json; charset=UTF-8","Vary":"Origin, X-Origin, Referer","Content-Encoding":"gzip","Date":"Sun, 30 Nov 2025 18:49:07 GMT","Server":"scaffolding on HTTPServer2","X-XSS-Protection":"0","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Server-Timing":"gfet4t7; dur=1694","Alt-Svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","Transfer-Encoding":"chunked"}},"candidates":[{"content":{"parts":[{"function_call":{"args":{"request":"A flight is taking off from Toronto at 2025-11-30 13:49:05 EST. It will take off in 35 minutes and the flight duration is 13 hours and 45 minutes. Calculate the landing date and time in Beijing (CST time zone) when the flight lands."},"name":"DataAnalystAgent"},"thought_signature":"CqwEAXLI2nxeSzQrMKJTxHFjBLL9N7HL0Pnw7BaKQQz4dkUmjTZjCf4BKkidL-dPCf9SVbGRmvtUqjCpUOzbVU1dcxqiQxZ8BPIbyIhSckTIEkQg5bkQaFxwj5zqn21cSkxZj_-XuirhYGYiw1y5ayZDQs4vud2icTW4ihPBWaQB9xLRHEWzithFT4V4QzCUmAzO2I-34QQ_t9r2bzmOdpzc5mf_QJyagsKcnRiEpeHHJTFcUb2brLwy_dvwqWFcHpagKBlVGJ2jNthQHH8D5UVmdfXiTs56Vno5plvA_sFh7KyoSP7XZ-5YVam66y_ofnyIpPLwJwP9pf8-_hN7Pbob0cxvsYiUJF_5kVtpkSB-2quqlbJqB2UeO4Mof1syHk0wRYM5zJQcUbTrmTlHaWJsU9d0vaVbrVxfLeHv1fdtKU_OdHahfr1-tTSFLVjXHDrx4LXzZOJokPI3bAr1_J2TPHN6YsKFChUw9VqiJTcWDUt50t5zF6dztgJr6OsUr5lgQ6yYrocsaHNw6baqXKdcvcgc3q3y-O2p-09GlkEgjrSoqZirgLvbG8uK16wtNWey7mEtUwT3VpMGMsYeXGFrbVys73IEVyfrXIpilOGB3tbGg-3_3yP5ZD2ZPl6Id6YIF0dRlNJsvhiTydy3Jp4yqJtOcaHsD1BfvQAZDUzZjjPypQ8_Myu83AGDtRMscG58Ym74q9lY_kD8TUWhb7CZ_b-wuW4AuN58On2Qeg=="}],"role":"model"},"finish_reason":"STOP","index":0}],"model_version":"gemini-2.5-flash","response_id":"o5EsacCWLuCOjrEPoOzG-Qk","usage_metadata":{"candidates_token_count":87,"prompt_token_count":1208,"prompt_tokens_details":[{"modality":"TEXT","token_count":1208}],"thoughts_token_count":159,"total_token_count":1454}}
-----------------------------------------------------------

core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b895140>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b895140>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b895140>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b895140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b895140>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b895140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b895140>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b895140>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b895140>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b895140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b895140>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b895140>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b7b0840>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b7b0840>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b7b0840>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b7b0840>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b7b0840>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b7b0840>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b7b0840>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('93ec1048-2c6e-4a53-b8ba-ced75b8f6f40', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81d180>, '[]', None, '2025-11-30 13:49:05.990975', '{"parts": [{"function_call": {"id": "adk-9feb8987-faad-41cd-8058-62826934d224", "args": {"request": "A flight is taking off from Toronto at 2025-11-30 13:49:05 EST. It will take off in 35 minutes and the flight duration is 13 hours and 45 minutes. Calculate the landing date and time in Beijing (CST time zone) when the flight lands."}, "name": "DataAnalystAgent"}, "thought_signature": "CqwEAXLI2nxeSzQrMKJTxHFjBLL9N7HL0Pnw7BaKQQz4dkUmjTZjCf4BKkidL-dPCf9SVbGRmvtUqjCpUOzbVU1dcxqiQxZ8BPIbyIhSckTIEkQg5bkQaFxwj5zqn21cSkxZj_-XuirhYGYiw1y5ayZDQs4vud2icTW4ihPBWaQB9xLRHEWzithFT4V4QzCUmAzO2I-34QQ_t9r2bzmOdpzc5mf_QJyagsKcnRiEpeHHJTFcUb2brLwy_dvwqWFcHpagKBlVGJ2jNthQHH8D5UVmdfXiTs56Vno5plvA_sFh7KyoSP7XZ-5YVam66y_ofnyIpPLwJwP9pf8-_hN7Pbob0cxvsYiUJF_5kVtpkSB-2quqlbJqB2UeO4Mof1syHk0wRYM5zJQcUbTrmTlHaWJsU9d0vaVbrVxfLeHv1fdtKU_OdHahfr1-tTSFLVjXHDrx4LXzZOJokPI3bAr1_J2TPHN6YsKFChUw9VqiJTcWDUt50t5zF6dztgJr6OsUr5lgQ6yYrocsaHNw6baqXKdcvcgc3q3y-O2p-09GlkEgjrSoqZirgLvbG8uK16wtNWey7mEtUwT3VpMGMsYeXGFrbVys73IEVyfrXIpilOGB3tbGg-3_3yP5ZD2ZPl6Id6YIF0dRlNJsvhiTydy3Jp4yqJtOcaHsD1BfvQAZDUzZjjPypQ8_Myu83AGDtRMscG58Ym74q9lY_kD8TUWhb7CZ_b-wuW4AuN58On2Qeg=="}], "role": "model"}', None, None, '{"candidates_token_count": 87, "prompt_token_count": 1208, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 1208}], "thoughts_token_count": 159, "total_token_count": 1454}', None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b7b0840>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('93ec1048-2c6e-4a53-b8ba-ced75b8f6f40', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81d180>, '[]', None, '2025-11-30 13:49:05.990975', '{"parts": [{"function_call": {"id": "adk-9feb8987-faad-41cd-8058-62826934d224", "args": {"request": "A flight is taking off from Toronto at 2025-11-30 13:49:05 EST. It will take off in 35 minutes and the flight duration is 13 hours and 45 minutes. Calculate the landing date and time in Beijing (CST time zone) when the flight lands."}, "name": "DataAnalystAgent"}, "thought_signature": "CqwEAXLI2nxeSzQrMKJTxHFjBLL9N7HL0Pnw7BaKQQz4dkUmjTZjCf4BKkidL-dPCf9SVbGRmvtUqjCpUOzbVU1dcxqiQxZ8BPIbyIhSckTIEkQg5bkQaFxwj5zqn21cSkxZj_-XuirhYGYiw1y5ayZDQs4vud2icTW4ihPBWaQB9xLRHEWzithFT4V4QzCUmAzO2I-34QQ_t9r2bzmOdpzc5mf_QJyagsKcnRiEpeHHJTFcUb2brLwy_dvwqWFcHpagKBlVGJ2jNthQHH8D5UVmdfXiTs56Vno5plvA_sFh7KyoSP7XZ-5YVam66y_ofnyIpPLwJwP9pf8-_hN7Pbob0cxvsYiUJF_5kVtpkSB-2quqlbJqB2UeO4Mof1syHk0wRYM5zJQcUbTrmTlHaWJsU9d0vaVbrVxfLeHv1fdtKU_OdHahfr1-tTSFLVjXHDrx4LXzZOJokPI3bAr1_J2TPHN6YsKFChUw9VqiJTcWDUt50t5zF6dztgJr6OsUr5lgQ6yYrocsaHNw6baqXKdcvcgc3q3y-O2p-09GlkEgjrSoqZirgLvbG8uK16wtNWey7mEtUwT3VpMGMsYeXGFrbVys73IEVyfrXIpilOGB3tbGg-3_3yP5ZD2ZPl6Id6YIF0dRlNJsvhiTydy3Jp4yqJtOcaHsD1BfvQAZDUzZjjPypQ8_Myu83AGDtRMscG58Ym74q9lY_kD8TUWhb7CZ_b-wuW4AuN58On2Qeg=="}], "role": "model"}', None, None, '{"candidates_token_count": 87, "prompt_token_count": 1208, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 1208}], "thoughts_token_count": 159, "total_token_count": 1454}', None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b7b0840>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b7b0840>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b894540>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b894540>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b894540>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b894540>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b894540>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b894540>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
runners.py:270 WARNING:App name mismatch detected. The runner is configured with app name "ottawa_public_health_agent", but the root agent was loaded from "/Users/leo/projects/kaggle/ottawa-public-health-agent/.venv/lib/python3.12/site-packages/google/adk/agents", which implies app name "agents".
google_llm.py:163 INFO:Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
google_llm.py:169 DEBUG:
LLM Request:
-----------------------------------------------------------
System Instruction:
You are an expert Python Data Analyst.
    
    PRIMARY OBJECTIVE:
    - Solve complex user queries by generating and executing high-precision Python code.
    
    CONTEXT DATA:
    The data will be provided to you by the ResearchCoordinator.
    
    OPERATIONAL PROTOCOLS:
    1. DATA INGESTION:
       - If context data is present, immediately parse it into a structured format (e.g., pandas DataFrame).
    
    2. ANALYSIS EXECUTION:
       - Formulate the necessary Python logic to perform the requested calculation or analysis.
       - Execute the code using `tool_run_python_code`.
       - You are PROHIBITED from performing the calculation or analysis yourself. Your only job is to generate the code that will perform the calculation or analysis.
    
    3. RESULT REPORTING:
       - MANDATORY: You MUST print the final result to stdout.
       - Ensure the output is clean, labeled, and ready for downstream consumption.
    

You are an agent. Your internal name is "DataAnalystAgent".
-----------------------------------------------------------
Config:
{'tools': [{}]}
-----------------------------------------------------------
Contents:
{"parts":[{"text":"A flight is taking off from Toronto at 2025-11-30 13:49:05 EST. It will take off in 35 minutes and the flight duration is 13 hours and 45 minutes. Calculate the landing date and time in Beijing (CST time zone) when the flight lands."}],"role":"user"}
-----------------------------------------------------------
Functions:
tool_run_python_code: {'code_string': {'type': <Type.STRING: 'STRING'>}} 
-----------------------------------------------------------

google_llm.py:219 INFO:Response received from the model.
google_llm.py:220 DEBUG:
LLM Response:
-----------------------------------------------------------
Text:
None
-----------------------------------------------------------
Function calls:

-----------------------------------------------------------
Raw response:
{"sdk_http_response":{"headers":{"Content-Type":"application/json; charset=UTF-8","Vary":"Origin, X-Origin, Referer","Content-Encoding":"gzip","Date":"Sun, 30 Nov 2025 18:49:13 GMT","Server":"scaffolding on HTTPServer2","X-XSS-Protection":"0","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Server-Timing":"gfet4t7; dur=6042","Alt-Svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","Transfer-Encoding":"chunked"}},"candidates":[{"finish_reason":"MALFORMED_FUNCTION_CALL","index":0}],"model_version":"gemini-2.5-flash","response_id":"qZEsaf64N_DI-8YP6fDwmQI","usage_metadata":{"prompt_token_count":403,"prompt_tokens_details":[{"modality":"TEXT","token_count":403}],"total_token_count":403}}
-----------------------------------------------------------

runners.py:1346 INFO:Closing runner...
runners.py:1354 INFO:Runner closed.
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8960c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8960c0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8960c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8960c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8960c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8960c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8960c0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8960c0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8960c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8960c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8960c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8960c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8960c0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8960c0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8960c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8960c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8960c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8960c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859540>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('e84e3637-a1a9-41a8-a70e-f9ec545d081f', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81dcc0>, None, None, '2025-11-30 13:49:13.982724', '{"parts": [{"function_response": {"id": "adk-9feb8987-faad-41cd-8058-62826934d224", "name": "DataAnalystAgent", "response": {"result": ""}}}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b859540>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('e84e3637-a1a9-41a8-a70e-f9ec545d081f', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81dcc0>, None, None, '2025-11-30 13:49:13.982724', '{"parts": [{"function_response": {"id": "adk-9feb8987-faad-41cd-8058-62826934d224", "name": "DataAnalystAgent", "response": {"result": ""}}}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859540>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b859540>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8962c0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8962c0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8962c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8962c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8962c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8962c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
google_llm.py:163 INFO:Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
google_llm.py:169 DEBUG:
LLM Request:
-----------------------------------------------------------
System Instruction:
Your purpose is to orchestrate a team of specialized agents in order to answer any user query, with particular expertise in Ottawa Public Health outbreak information.
    You should also engage in helpful conversation and remember details the user shares with you (like their name).
    
    CURRENT TIME CONTEXT: Operate in timezone America/Toronto for Ottawa, Canada.
    IMPORTANT: For any question about time/date/timezone, delegate to the `TimeAgent`.

    AVAILABLE SPECIALISTS:

    AVAILABLE SPECIALISTS:
    1. `RetrieveHealthDataAgent`: Fetches CURRENT Ottawa Public Health facility outbreak reports. Use this for questions about **active/recent outbreaks** in:
       1) Camp
       2) Congregate Care
       3) Communal Living Facility
       4) Correctional Facility
       5) Group Home
       6) Supportive Living
       7) Hospice
       8) Hospital
       9) Licensed Child Care Facility/ Daycare
      10) Long Term Care Home
      11) Retirement Home
      12) Rooming House
      13) Elementary School
      14) Secondary School
      15) Post Secondary School
      16) Shelter
      17) Supported Independent Living
    2. `HealthAdviceAgent`: Use this for:
       - **Visitor Advice**: Official OPH guidelines for visiting facilities with outbreaks.
       - **Health/Disease Inquiries**: Questions about Communicable Diseases (symptoms, prevention, treatment) or General Public Health.
       (Note: This agent handles its own research for health topics, so do NOT call `ResearchAgent` separately for these).
    3. `ResearchAgent`: Searches the web. Use this for:
       - **General Facts & Knowledge**: History, News, Leadership, Statistics.
       - **Non-Advice Public Health**: Questions like "Who is the head of OPH?" or "History of pandemics".
       - (Note: Do NOT use for specific disease advice/symptoms; use `HealthAdviceAgent` instead).
       - (Note: Do NOT use for active outbreaks in the facilities listed above; use `RetrieveHealthDataAgent`).
    4. `DataAnalystAgent`: Analyzes data. Call this for **ANY** math, calculations, date arithmetic (if relative to a known date), or code execution tasks.
    5. `SummarizerAgent`: Synthesizes reports. Use this ONLY for complex multi-source data aggregation.
    6. `TimeAgent`: Fetches the current date and time. Use this for questions like "What time is it?", "What is today's date?", etc.

    WORKFLOW PROTOCOL:
    1. **Outbreak Data**: If user asks for active outbreaks in ANY monitored facility (LTC, Schools, Hospitals, Shelters, etc.):
       Call `RetrieveHealthDataAgent`.
       THEN call `HealthAdviceAgent` to provide visitor safety advice.
       THEN return the combined result yourself.
    2. **Health/Disease ADVICE**: If user asks for guidance on diseases, symptoms, prevention, or what to do, call `HealthAdviceAgent` directly.
       Return the advice provided by the agent.
    3. **General Research**: For other topics (non public health related), call `ResearchAgent`.
       Return the findings directly.
    4. **Analysis**: For math/stats/logic/data analysis/programming, call `DataAnalystAgent`.
       Return the analysis result directly.
    

You are an agent. Your internal name is "ottawa_public_health_agent".
-----------------------------------------------------------
Config:
{'tools': [{}]}
-----------------------------------------------------------
Contents:
{"parts":[{"text":"what is the weather"}],"role":"user"}
{"parts":[{"function_call":{"args":{"request":"current weather"},"name":"ResearchAgent"},"thought_signature":"CtgCAXLI2nzIjgdzbBnI2DzJSe26nEK6h-NsGXwJIp3LvTU0-B-yT89xBB0te4LJMo1EaO3KOk7yacyoOJIC6U5LObPe-AOHKfFQtT3SB_CAoSqggYqn4yAg6eLYYiQFxkMOtYEPfSiCZqv4j8xvoRSMU1dHeY7UxTibr6i_YYqRNWvXAoQS7PH3wT2BaVqr4GNy70wMDoCFIxXBVclpkFMqyffYPo_ikaRrLnxxurf1rQPJlQYn98z17NsnEknLFB6FY5xikykGd28HZ-hveY4rgUw-n4Tgg-wLcVQmWgkVwDmdeq1rs0ZiggPf1XGuuo2As8PKRq7fsDU4Bh6KSxf9dBcEUOKEoZgP4RcynuYxP5-lFvFK1IU35n4ps3OyOo9FoofIPlIN8LfLDxo_ma2Q8li5ixaVYFyUSl0U_Ny_m5WBLYlryMFfjTl69_ywbISMPDvm4dBha2s="}],"role":"model"}
{"parts":[{"function_response":{"name":"ResearchAgent","response":{"result":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}}}],"role":"user"}
{"parts":[{"text":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}],"role":"model"}
{"parts":[{"text":"what is my current location"}],"role":"user"}
{"parts":[{"text":"I am sorry, I cannot determine your current location. As an AI, I do not have access to your personal information or location data.","thought_signature":"CroEAXLI2nx2aY9VyFygK6YI1oWveGSqVI3Xr5fx27vDX5VcRLxfl3OZGtbXQNze7Ch3voPsqM2_UGuVDsrs0rXAX_6RCdweLaYtf6Be-tuUXsJwYdbNJMEN9I91e51kiLuMHusnNjckI0L0nujX8T2zDhNtUZBw3MpVCGL1Nt-hsz6tGhMRnsX9JaqdJF0S06F14ZicsWPMkNayB6CkKd8viB5OAf1YEVzJhsIjmwqpCJzjNiOfwKIBMfi1xbzmOzTwNSMw3lYMHn84-XZHumVKjtOZgpBcAeUsc-Kk7UBS4fLBkK0beJHMzzFZnabFjPennlLDU_pP0e5ulS-Qw7wAE3TkFI8lRlrSS29RNlNMDnKlxkvmHxPVOQpK_5VWdfTcKkRTJ__lI23Bv7JoKNVC8fuWlRG3D_hrP2k7k6AjCih2aps1YmIygJnq_84qrkX3yqWJhcBLngnuhswshUnsBGrAtjLSVdOzM3Gud7cJt3-gr__YKVVaVDYMUfTmz60T2KMm9bYctFkz7-PL8hKE_clfmrrnHXjINftQoEceL2XGIS9UiVCARtRNzmV1eEM2aXp1l3Jmunlq2l0Es_r5Nuy4bQ7M6TqzTZqnHlJZau6tLdvwoWIuH5ymjpEQoRi06R4FsyRhZRwMb81NxjWmxvl4DAyifCmlosw6pwnXvlF8Z0ABXEqL-_8C62pr6qfJXP_GwrwR1ISHuTQux1EM9baUxMWbeceROnkk0YsUjpLCgLyf4gwVMoD7"}],"role":"model"}
{"parts":[{"text":"A flight is going to take off in 35 minutes from now, from Toronto to beijing. It will take 13 hours and 45 minutes to land. What is the date and time in Bejing by the time the flight lands."}],"role":"user"}
{"parts":[{"function_call":{"args":{"request":"current date and time in Toronto"},"name":"TimeAgent"},"thought_signature":"CoMJAXLI2nyeZUnePYBTJ8jVDw21x8lPcG8FKfiPOFNwLJOSJw3npZZ7DqsxDEoDOfcdrkrEeHiRDzl_eiylarlwKCh85774t5GVfT4Kzt7NVGEQyMxQgCBOeQdZs8S1ybF_lvbcZypzUgy5CDeCQou4HHcASITZJe7BYO897rSQ-BZT7V4l20NtSD-6nIAvfhdbYsK2RarJ3ICYpjINwejKk4l58M3iN_ehzo6pncWX4FB4uw7SnUS5E0Xlf0CXZ4SlvB5qCZHbiypXoqDQA1gzbSKbptFJpa-h8JvkjPo-lifh3bLcGrvyoicSl9xX9Hi-F6ga0Y-VNnY2NUWloW0yYcXXMpSrgQKtCCdI_nR-YIqpnD1inuP_Q0upUHrz2h4brZ0GNGyLyYIY7YdipwFmQUmtG2U6exxdxVhzXQJgdi0wjzgs-Is-rynSHDlFsR4qe6GSQYe35N5KHt-61wlBvk1zOvdWVZn_HrQkuq-oLkbswRok7W30U6XpicCSTN9pWCmrHAp3zEs-6qMyQKpl8HHLwl8ohxCwfFdBa5uqgIyOkitNF4rrhpUG_uw7i5ZtAVpu2enHxbBXDksI1pzk6Uyzhafs9GOKvEBQ8No43zd4Tz4Xk-imXqfPgrrbgTN1RiSkdPU96i2BE77UBHrASTZd4vwH-m68c0Yf9V8i5VyjXj9RgMNAXtMH-sqlph8EdwjQhPa9yxkZMz25mHuOR8o5WNK1zQ-36xLCMkhbRrzmeGCBZfDhZZ_G0qkDKb2j_jEB-ohWtDTF8JAy25APpFMg5Uf-wgyhLPX2mprB58BLjq3lSVJlmC5FYVuXAdhVX3Vy71V_8EN9gAC5BVr7VG8hmygvf3Elf6Jd_KgMWclkqVPE29SSmcDftr1yotqjzXdE3qeRcJGgbOVnzt3eeSTnJpN4dDBVjdH8FTx85spfICB9mW9UIrkK2pAEfdGDy-pXqVs-IIdb5sG80A0TvsBYBaCZWrKrtwV7u_zsNXznVkZ2hGItKz9b6Y2bIlt-OeuxZdmquFPm6p5jjiX5LGhXnOXirCHi4HtJj4iuZafl_bKL5TgKZOj-1LehDwKKEo5Eq3OdU5kK-5YnfVRLE-lVbMVM4aN-si0fReUHZ1wYnVaVYJiPnhcO13Zdm23VkKbyIgJURLIXvcTJLAf61CSZF5yOGQHcq_h9wZEOZr_JrX4zCO0eF44kSMBxKktb5mpBxXwla0ECvmVsu8aBaJgAeNlKy443HUNtpWmUbmPFUm3R4Wu7R4yslmHa1mLqB2BnZDxEZkZIxojC4MRttaZUWHLTMhMVINRP-IuJwBv0WInHTCbM1uvbDMYTwQumD2kxi9e9H1VA8d77iAa4SZTRUX9aYn-AkNU_IHfEoiiFm177xokovq-Sm72-qUyN9wVayDg1ZUT4HZERYS6iKHjFIcZ3d5_XL3lf0_tCM6YdoWqFskbI8QvfS2EdxiSTkjPvm3KVJzENl5fmf6sjBqgFs3RTsOJQFJnMyOvjRDRXg5qnrZVm2zmlemnF2boEUGZe"}],"role":"model"}
{"parts":[{"function_response":{"name":"TimeAgent","response":{"result":"The current date and time in Toronto, Canada is 2025-11-30 13:49:05 EST."}}}],"role":"user"}
{"parts":[{"function_call":{"args":{"request":"A flight is taking off from Toronto at 2025-11-30 13:49:05 EST. It will take off in 35 minutes and the flight duration is 13 hours and 45 minutes. Calculate the landing date and time in Beijing (CST time zone) when the flight lands."},"name":"DataAnalystAgent"},"thought_signature":"CqwEAXLI2nxeSzQrMKJTxHFjBLL9N7HL0Pnw7BaKQQz4dkUmjTZjCf4BKkidL-dPCf9SVbGRmvtUqjCpUOzbVU1dcxqiQxZ8BPIbyIhSckTIEkQg5bkQaFxwj5zqn21cSkxZj_-XuirhYGYiw1y5ayZDQs4vud2icTW4ihPBWaQB9xLRHEWzithFT4V4QzCUmAzO2I-34QQ_t9r2bzmOdpzc5mf_QJyagsKcnRiEpeHHJTFcUb2brLwy_dvwqWFcHpagKBlVGJ2jNthQHH8D5UVmdfXiTs56Vno5plvA_sFh7KyoSP7XZ-5YVam66y_ofnyIpPLwJwP9pf8-_hN7Pbob0cxvsYiUJF_5kVtpkSB-2quqlbJqB2UeO4Mof1syHk0wRYM5zJQcUbTrmTlHaWJsU9d0vaVbrVxfLeHv1fdtKU_OdHahfr1-tTSFLVjXHDrx4LXzZOJokPI3bAr1_J2TPHN6YsKFChUw9VqiJTcWDUt50t5zF6dztgJr6OsUr5lgQ6yYrocsaHNw6baqXKdcvcgc3q3y-O2p-09GlkEgjrSoqZirgLvbG8uK16wtNWey7mEtUwT3VpMGMsYeXGFrbVys73IEVyfrXIpilOGB3tbGg-3_3yP5ZD2ZPl6Id6YIF0dRlNJsvhiTydy3Jp4yqJtOcaHsD1BfvQAZDUzZjjPypQ8_Myu83AGDtRMscG58Ym74q9lY_kD8TUWhb7CZ_b-wuW4AuN58On2Qeg=="}],"role":"model"}
{"parts":[{"function_response":{"name":"DataAnalystAgent","response":{"result":""}}}],"role":"user"}
-----------------------------------------------------------
Functions:
RetrieveHealthDataAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
ResearchAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
DataAnalystAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
SummarizerAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
HealthAdviceAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
TimeAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
-----------------------------------------------------------

google_llm.py:219 INFO:Response received from the model.
google_llm.py:220 DEBUG:
LLM Response:
-----------------------------------------------------------
Text:
None
-----------------------------------------------------------
Function calls:
name: DataAnalystAgent, args: {'request': 'Given the current time in Toronto is 2025-11-30 13:49:05 EST. A flight departs in 35 minutes. The flight duration is 13 hours and 45 minutes. Calculate the exact date and time of landing in Beijing, considering Toronto is EST (UTC-5) and Beijing is CST (UTC+8).'}
-----------------------------------------------------------
Raw response:
{"sdk_http_response":{"headers":{"Content-Type":"application/json; charset=UTF-8","Vary":"Origin, X-Origin, Referer","Content-Encoding":"gzip","Date":"Sun, 30 Nov 2025 18:49:16 GMT","Server":"scaffolding on HTTPServer2","X-XSS-Protection":"0","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Server-Timing":"gfet4t7; dur=2155","Alt-Svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","Transfer-Encoding":"chunked"}},"candidates":[{"content":{"parts":[{"function_call":{"args":{"request":"Given the current time in Toronto is 2025-11-30 13:49:05 EST. A flight departs in 35 minutes. The flight duration is 13 hours and 45 minutes. Calculate the exact date and time of landing in Beijing, considering Toronto is EST (UTC-5) and Beijing is CST (UTC+8)."},"name":"DataAnalystAgent"},"thought_signature":"CrYHAXLI2nw-Pig3Yz3nfwoVyTyXjFsoNk4hWDkPrS8FYbJgELNeFexa5-Bzp-3SrJPgLxwHIGhzqbY0Y1pmFpwSPCIhc3r6A3gGz3_uWFItfrRCi9eFV_75bfKl_Qx3wxRj-UBIGcMnZe1vqN2aRxQ7V8e9jWgRffrsFuAAq4ExDWtbkLDyNv07fORJkyXINEwqbINn8ofSJVzBUE8Q0UAQlZ-eq9ni1B1IuTEUkJOKWJ2Xz2gnfU6ek7hWPLt6rv84hZ4sUEx7QZEQg1pO8SFh0ke_cfLQAPdb77odBBFw99ysXXWZrkeA23HIr-1VYsVF1Cd6d_Twu1c0013prDkBNQWCfW1ORlMGvXtr0OpyXHLHFco2hDYVaisOTSa1Acg-ND_-EH6oUihCach6gDVYRO_RMn4uUVdcYKgU3B6wferSkaWbBfBtgsKPtIBRzGoand8k5ASOGplCrd6C3g-XzVV0PzkDEfgCWgXE0u63oEdYLNXxD6o9ExoW3GU8fA_m8-_eGrwR-Gwyu3OFhJz89UhVEA9tF0CuX2fTEtfP1WnM9THhTQ9iZGZA9tg_O4sTF51Lcx0t1DWPpRJ4m9B1DDhzEj720oxAXVmdfklW57QwSq3hIZo5gYpGkfNo6hxrh_YOiPusTx9bslm0afKlPR86Y_-r4zoEG0yFCvc_hPzBuMbWeSON-XgeUthtCRXixeKHzRBDoFNZUJvewhYBekZx7g5PuOwdHrM8Tj3XYsLhWTeL0cWKCLFDauP9KUK8KEOhG65yPeLsLXlEB6sKz8k6JpC17XJnrC1i44BMufimrqucEaf4ttzHpRngu80zc-9-NffiqUTwI4R5y1bgbsyH4mZ5v2mM_4jTEsHy42EgW_KyM7Mlshn0Qv7SBJo2E4wQQncrn7pLZP87GyQnxoXTzP8sVqeewriFanoMGqcwmY2lv391k5TNXIsLt0E5I6qqc7huqucuAirmnbEJoX2pulI3YVM_TMgTNSuwnB5zBmkQFkxk0JKrasAtH4u66RUnN3x1k90Os0Ccy5H0GjORADAZ1U7WgI-Vvi53qSazTBYwpUGEY6mNfMgeUSuolIc294746RTNqrnO-gdDPT9LDBZhy7bGWWOHVR5YI9mY_demXeGNUUYwI3IGEOBdWEqbAchwH2K0VeBe_Uu__LTap6RVhUyZwUHfwXeIwWxeeIVpeyV_FoLyhIwZ-HlzBckIJ39iciLfLL-vrlCrGQMrHuq-IsaA1b1ZGXh8RI2fr8vrqi4="}],"role":"model"},"finish_reason":"STOP","index":0}],"model_version":"gemini-2.5-flash","response_id":"rJEsaeGKDYqa-8YPhsqFiA0","usage_metadata":{"cache_tokens_details":[{"modality":"TEXT","token_count":611}],"cached_content_token_count":611,"candidates_token_count":96,"prompt_token_count":1310,"prompt_tokens_details":[{"modality":"TEXT","token_count":1310}],"thoughts_token_count":267,"total_token_count":1673}}
-----------------------------------------------------------

core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896640>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896640>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896640>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896640>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896640>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896640>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896640>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896640>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896640>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896640>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896640>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896640>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896640>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896640>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896640>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896640>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896640>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896640>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bc40>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('f9d2ad66-0212-4877-9c13-242276b141f6', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81df00>, '[]', None, '2025-11-30 13:49:13.994420', '{"parts": [{"function_call": {"id": "adk-860ea313-b782-485b-bb15-2ac6f059be2a", "args": {"request": "Given the current time in Toronto is 2025-11-30 13:49:05 EST. A flight departs in 35 minutes. The flight duration is 13 hours and 45 minutes. Calculate the exact date and time of landing in Beijing, considering Toronto is EST (UTC-5) and Beijing is CST (UTC+8)."}, "name": "DataAnalystAgent"}, "thought_signature": "CrYHAXLI2nw-Pig3Yz3nfwoVyTyXjFsoNk4hWDkPrS8FYbJgELNeFexa5-Bzp-3SrJPgLxwHIGhzqbY0Y1pmFpwSPCIhc3r6A3gGz3_uWFItfrRCi9eFV_75bfKl_Qx3wxRj-UBIGcMnZe1vqN2aRxQ7V8e9jWgRffrsFuAAq4ExDWtbkLDyNv07fORJkyXINEwqbINn8ofSJVzBUE8Q0UAQlZ-eq9ni1B1IuTEUkJOKWJ2Xz2gnfU6ek7hWPLt6rv84hZ4sUEx7QZEQg1pO8SFh0ke_cfLQAPdb77odBBFw99ysXXWZrkeA23HIr-1VYsVF1Cd6d_Twu1c0013prDkBNQWCfW1ORlMGvXtr0OpyXHLHFco2hDYVaisOTSa1Acg-ND_-EH6oUihCach6gDVYRO_RMn4uUVdcYKgU3B6wferSkaWbBfBtgsKPtIBRzGoand8k5ASOGplCrd6C3g-XzVV0PzkDEfgCWgXE0u63oEdYLNXxD6o9ExoW3GU8fA_m8-_eGrwR-Gwyu3OFhJz89UhVEA9tF0CuX2fTEtfP1WnM9THhTQ9iZGZA9tg_O4sTF51Lcx0t1DWPpRJ4m9B1DDhzEj720oxAXVmdfklW57QwSq3hIZo5gYpGkfNo6hxrh_YOiPusTx9bslm0afKlPR86Y_-r4zoEG0yFCvc_hPzBuMbWeSON-XgeUthtCRXixeKHzRBDoFNZUJvewhYBekZx7g5PuOwdHrM8Tj3XYsLhWTeL0cWKCLFDauP9KUK8KEOhG65yPeLsLXlEB6sKz8k6JpC17XJnrC1i44BMufimrqucEaf4ttzHpRngu80zc-9-NffiqUTwI4R5y1bgbsyH4mZ5v2mM_4jTEsHy42EgW_KyM7Mlshn0Qv7SBJo2E4wQQncrn7pLZP87GyQnxoXTzP8sVqeewriFanoMGqcwmY2lv391k5TNXIsLt0E5I6qqc7huqucuAirmnbEJoX2pulI3YVM_TMgTNSuwnB5zBmkQFkxk0JKrasAtH4u66RUnN3x1k90Os0Ccy5H0GjORADAZ1U7WgI-Vvi53qSazTBYwpUGEY6mNfMgeUSuolIc294746RTNqrnO-gdDPT9LDBZhy7bGWWOHVR5YI9mY_demXeGNUUYwI3IGEOBdWEqbAchwH2K0VeBe_Uu__LTap6RVhUyZwUHfwXeIwWxeeIVpeyV_FoLyhIwZ-HlzBckIJ39iciLfLL-vrlCrGQMrHuq-IsaA1b1ZGXh8RI2fr8vrqi4="}], "role": "model"}', None, None, '{"cache_tokens_details": [{"modality": "TEXT", "token_count": 611}], "cached_content_token_count": 611, "candidates_token_count": 96, "prompt_token_count": 1310, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 1310}], "thoughts_token_count": 267, "total_token_count": 1673}', None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85bc40>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('f9d2ad66-0212-4877-9c13-242276b141f6', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81df00>, '[]', None, '2025-11-30 13:49:13.994420', '{"parts": [{"function_call": {"id": "adk-860ea313-b782-485b-bb15-2ac6f059be2a", "args": {"request": "Given the current time in Toronto is 2025-11-30 13:49:05 EST. A flight departs in 35 minutes. The flight duration is 13 hours and 45 minutes. Calculate the exact date and time of landing in Beijing, considering Toronto is EST (UTC-5) and Beijing is CST (UTC+8)."}, "name": "DataAnalystAgent"}, "thought_signature": "CrYHAXLI2nw-Pig3Yz3nfwoVyTyXjFsoNk4hWDkPrS8FYbJgELNeFexa5-Bzp-3SrJPgLxwHIGhzqbY0Y1pmFpwSPCIhc3r6A3gGz3_uWFItfrRCi9eFV_75bfKl_Qx3wxRj-UBIGcMnZe1vqN2aRxQ7V8e9jWgRffrsFuAAq4ExDWtbkLDyNv07fORJkyXINEwqbINn8ofSJVzBUE8Q0UAQlZ-eq9ni1B1IuTEUkJOKWJ2Xz2gnfU6ek7hWPLt6rv84hZ4sUEx7QZEQg1pO8SFh0ke_cfLQAPdb77odBBFw99ysXXWZrkeA23HIr-1VYsVF1Cd6d_Twu1c0013prDkBNQWCfW1ORlMGvXtr0OpyXHLHFco2hDYVaisOTSa1Acg-ND_-EH6oUihCach6gDVYRO_RMn4uUVdcYKgU3B6wferSkaWbBfBtgsKPtIBRzGoand8k5ASOGplCrd6C3g-XzVV0PzkDEfgCWgXE0u63oEdYLNXxD6o9ExoW3GU8fA_m8-_eGrwR-Gwyu3OFhJz89UhVEA9tF0CuX2fTEtfP1WnM9THhTQ9iZGZA9tg_O4sTF51Lcx0t1DWPpRJ4m9B1DDhzEj720oxAXVmdfklW57QwSq3hIZo5gYpGkfNo6hxrh_YOiPusTx9bslm0afKlPR86Y_-r4zoEG0yFCvc_hPzBuMbWeSON-XgeUthtCRXixeKHzRBDoFNZUJvewhYBekZx7g5PuOwdHrM8Tj3XYsLhWTeL0cWKCLFDauP9KUK8KEOhG65yPeLsLXlEB6sKz8k6JpC17XJnrC1i44BMufimrqucEaf4ttzHpRngu80zc-9-NffiqUTwI4R5y1bgbsyH4mZ5v2mM_4jTEsHy42EgW_KyM7Mlshn0Qv7SBJo2E4wQQncrn7pLZP87GyQnxoXTzP8sVqeewriFanoMGqcwmY2lv391k5TNXIsLt0E5I6qqc7huqucuAirmnbEJoX2pulI3YVM_TMgTNSuwnB5zBmkQFkxk0JKrasAtH4u66RUnN3x1k90Os0Ccy5H0GjORADAZ1U7WgI-Vvi53qSazTBYwpUGEY6mNfMgeUSuolIc294746RTNqrnO-gdDPT9LDBZhy7bGWWOHVR5YI9mY_demXeGNUUYwI3IGEOBdWEqbAchwH2K0VeBe_Uu__LTap6RVhUyZwUHfwXeIwWxeeIVpeyV_FoLyhIwZ-HlzBckIJ39iciLfLL-vrlCrGQMrHuq-IsaA1b1ZGXh8RI2fr8vrqi4="}], "role": "model"}', None, None, '{"cache_tokens_details": [{"modality": "TEXT", "token_count": 611}], "cached_content_token_count": 611, "candidates_token_count": 96, "prompt_token_count": 1310, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 1310}], "thoughts_token_count": 267, "total_token_count": 1673}', None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bc40>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85bc40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896ac0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896ac0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896ac0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896ac0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896ac0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896ac0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
runners.py:270 WARNING:App name mismatch detected. The runner is configured with app name "ottawa_public_health_agent", but the root agent was loaded from "/Users/leo/projects/kaggle/ottawa-public-health-agent/.venv/lib/python3.12/site-packages/google/adk/agents", which implies app name "agents".
google_llm.py:163 INFO:Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
google_llm.py:169 DEBUG:
LLM Request:
-----------------------------------------------------------
System Instruction:
You are an expert Python Data Analyst.
    
    PRIMARY OBJECTIVE:
    - Solve complex user queries by generating and executing high-precision Python code.
    
    CONTEXT DATA:
    The data will be provided to you by the ResearchCoordinator.
    
    OPERATIONAL PROTOCOLS:
    1. DATA INGESTION:
       - If context data is present, immediately parse it into a structured format (e.g., pandas DataFrame).
    
    2. ANALYSIS EXECUTION:
       - Formulate the necessary Python logic to perform the requested calculation or analysis.
       - Execute the code using `tool_run_python_code`.
       - You are PROHIBITED from performing the calculation or analysis yourself. Your only job is to generate the code that will perform the calculation or analysis.
    
    3. RESULT REPORTING:
       - MANDATORY: You MUST print the final result to stdout.
       - Ensure the output is clean, labeled, and ready for downstream consumption.
    

You are an agent. Your internal name is "DataAnalystAgent".
-----------------------------------------------------------
Config:
{'tools': [{}]}
-----------------------------------------------------------
Contents:
{"parts":[{"text":"Given the current time in Toronto is 2025-11-30 13:49:05 EST. A flight departs in 35 minutes. The flight duration is 13 hours and 45 minutes. Calculate the exact date and time of landing in Beijing, considering Toronto is EST (UTC-5) and Beijing is CST (UTC+8)."}],"role":"user"}
-----------------------------------------------------------
Functions:
tool_run_python_code: {'code_string': {'type': <Type.STRING: 'STRING'>}} 
-----------------------------------------------------------

google_llm.py:219 INFO:Response received from the model.
google_llm.py:220 DEBUG:
LLM Response:
-----------------------------------------------------------
Text:
None
-----------------------------------------------------------
Function calls:

-----------------------------------------------------------
Raw response:
{"sdk_http_response":{"headers":{"Content-Type":"application/json; charset=UTF-8","Vary":"Origin, X-Origin, Referer","Content-Encoding":"gzip","Date":"Sun, 30 Nov 2025 18:49:18 GMT","Server":"scaffolding on HTTPServer2","X-XSS-Protection":"0","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Server-Timing":"gfet4t7; dur=2637","Alt-Svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","Transfer-Encoding":"chunked"}},"candidates":[{"finish_reason":"MALFORMED_FUNCTION_CALL","index":0}],"model_version":"gemini-2.5-flash","response_id":"rpEsacCDOIqa-8YPhsqFiA0","usage_metadata":{"prompt_token_count":411,"prompt_tokens_details":[{"modality":"TEXT","token_count":411}],"total_token_count":411}}
-----------------------------------------------------------

runners.py:1346 INFO:Closing runner...
runners.py:1354 INFO:Runner closed.
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896bc0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896bc0>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896bc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896bc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896bc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896bc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896bc0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896bc0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896bc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896bc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896bc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896bc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896bc0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896bc0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896bc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b896bc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896bc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896bc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896bc0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('2d08569c-7122-4ec3-b4d1-a6eae9a0e022', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81ce80>, None, None, '2025-11-30 13:49:18.895116', '{"parts": [{"function_response": {"id": "adk-860ea313-b782-485b-bb15-2ac6f059be2a", "name": "DataAnalystAgent", "response": {"result": ""}}}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b896bc0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('2d08569c-7122-4ec3-b4d1-a6eae9a0e022', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81ce80>, None, None, '2025-11-30 13:49:18.895116', '{"parts": [{"function_response": {"id": "adk-860ea313-b782-485b-bb15-2ac6f059be2a", "name": "DataAnalystAgent", "response": {"result": ""}}}], "role": "user"}', None, None, None, None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896bc0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b896bc0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8968c0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8968c0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8968c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8968c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8968c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8968c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
google_llm.py:163 INFO:Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
google_llm.py:169 DEBUG:
LLM Request:
-----------------------------------------------------------
System Instruction:
Your purpose is to orchestrate a team of specialized agents in order to answer any user query, with particular expertise in Ottawa Public Health outbreak information.
    You should also engage in helpful conversation and remember details the user shares with you (like their name).
    
    CURRENT TIME CONTEXT: Operate in timezone America/Toronto for Ottawa, Canada.
    IMPORTANT: For any question about time/date/timezone, delegate to the `TimeAgent`.

    AVAILABLE SPECIALISTS:

    AVAILABLE SPECIALISTS:
    1. `RetrieveHealthDataAgent`: Fetches CURRENT Ottawa Public Health facility outbreak reports. Use this for questions about **active/recent outbreaks** in:
       1) Camp
       2) Congregate Care
       3) Communal Living Facility
       4) Correctional Facility
       5) Group Home
       6) Supportive Living
       7) Hospice
       8) Hospital
       9) Licensed Child Care Facility/ Daycare
      10) Long Term Care Home
      11) Retirement Home
      12) Rooming House
      13) Elementary School
      14) Secondary School
      15) Post Secondary School
      16) Shelter
      17) Supported Independent Living
    2. `HealthAdviceAgent`: Use this for:
       - **Visitor Advice**: Official OPH guidelines for visiting facilities with outbreaks.
       - **Health/Disease Inquiries**: Questions about Communicable Diseases (symptoms, prevention, treatment) or General Public Health.
       (Note: This agent handles its own research for health topics, so do NOT call `ResearchAgent` separately for these).
    3. `ResearchAgent`: Searches the web. Use this for:
       - **General Facts & Knowledge**: History, News, Leadership, Statistics.
       - **Non-Advice Public Health**: Questions like "Who is the head of OPH?" or "History of pandemics".
       - (Note: Do NOT use for specific disease advice/symptoms; use `HealthAdviceAgent` instead).
       - (Note: Do NOT use for active outbreaks in the facilities listed above; use `RetrieveHealthDataAgent`).
    4. `DataAnalystAgent`: Analyzes data. Call this for **ANY** math, calculations, date arithmetic (if relative to a known date), or code execution tasks.
    5. `SummarizerAgent`: Synthesizes reports. Use this ONLY for complex multi-source data aggregation.
    6. `TimeAgent`: Fetches the current date and time. Use this for questions like "What time is it?", "What is today's date?", etc.

    WORKFLOW PROTOCOL:
    1. **Outbreak Data**: If user asks for active outbreaks in ANY monitored facility (LTC, Schools, Hospitals, Shelters, etc.):
       Call `RetrieveHealthDataAgent`.
       THEN call `HealthAdviceAgent` to provide visitor safety advice.
       THEN return the combined result yourself.
    2. **Health/Disease ADVICE**: If user asks for guidance on diseases, symptoms, prevention, or what to do, call `HealthAdviceAgent` directly.
       Return the advice provided by the agent.
    3. **General Research**: For other topics (non public health related), call `ResearchAgent`.
       Return the findings directly.
    4. **Analysis**: For math/stats/logic/data analysis/programming, call `DataAnalystAgent`.
       Return the analysis result directly.
    

You are an agent. Your internal name is "ottawa_public_health_agent".
-----------------------------------------------------------
Config:
{'tools': [{}]}
-----------------------------------------------------------
Contents:
{"parts":[{"text":"what is the weather"}],"role":"user"}
{"parts":[{"function_call":{"args":{"request":"current weather"},"name":"ResearchAgent"},"thought_signature":"CtgCAXLI2nzIjgdzbBnI2DzJSe26nEK6h-NsGXwJIp3LvTU0-B-yT89xBB0te4LJMo1EaO3KOk7yacyoOJIC6U5LObPe-AOHKfFQtT3SB_CAoSqggYqn4yAg6eLYYiQFxkMOtYEPfSiCZqv4j8xvoRSMU1dHeY7UxTibr6i_YYqRNWvXAoQS7PH3wT2BaVqr4GNy70wMDoCFIxXBVclpkFMqyffYPo_ikaRrLnxxurf1rQPJlQYn98z17NsnEknLFB6FY5xikykGd28HZ-hveY4rgUw-n4Tgg-wLcVQmWgkVwDmdeq1rs0ZiggPf1XGuuo2As8PKRq7fsDU4Bh6KSxf9dBcEUOKEoZgP4RcynuYxP5-lFvFK1IU35n4ps3OyOo9FoofIPlIN8LfLDxo_ma2Q8li5ixaVYFyUSl0U_Ny_m5WBLYlryMFfjTl69_ywbISMPDvm4dBha2s="}],"role":"model"}
{"parts":[{"function_response":{"name":"ResearchAgent","response":{"result":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}}}],"role":"user"}
{"parts":[{"text":"The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow."}],"role":"model"}
{"parts":[{"text":"what is my current location"}],"role":"user"}
{"parts":[{"text":"I am sorry, I cannot determine your current location. As an AI, I do not have access to your personal information or location data.","thought_signature":"CroEAXLI2nx2aY9VyFygK6YI1oWveGSqVI3Xr5fx27vDX5VcRLxfl3OZGtbXQNze7Ch3voPsqM2_UGuVDsrs0rXAX_6RCdweLaYtf6Be-tuUXsJwYdbNJMEN9I91e51kiLuMHusnNjckI0L0nujX8T2zDhNtUZBw3MpVCGL1Nt-hsz6tGhMRnsX9JaqdJF0S06F14ZicsWPMkNayB6CkKd8viB5OAf1YEVzJhsIjmwqpCJzjNiOfwKIBMfi1xbzmOzTwNSMw3lYMHn84-XZHumVKjtOZgpBcAeUsc-Kk7UBS4fLBkK0beJHMzzFZnabFjPennlLDU_pP0e5ulS-Qw7wAE3TkFI8lRlrSS29RNlNMDnKlxkvmHxPVOQpK_5VWdfTcKkRTJ__lI23Bv7JoKNVC8fuWlRG3D_hrP2k7k6AjCih2aps1YmIygJnq_84qrkX3yqWJhcBLngnuhswshUnsBGrAtjLSVdOzM3Gud7cJt3-gr__YKVVaVDYMUfTmz60T2KMm9bYctFkz7-PL8hKE_clfmrrnHXjINftQoEceL2XGIS9UiVCARtRNzmV1eEM2aXp1l3Jmunlq2l0Es_r5Nuy4bQ7M6TqzTZqnHlJZau6tLdvwoWIuH5ymjpEQoRi06R4FsyRhZRwMb81NxjWmxvl4DAyifCmlosw6pwnXvlF8Z0ABXEqL-_8C62pr6qfJXP_GwrwR1ISHuTQux1EM9baUxMWbeceROnkk0YsUjpLCgLyf4gwVMoD7"}],"role":"model"}
{"parts":[{"text":"A flight is going to take off in 35 minutes from now, from Toronto to beijing. It will take 13 hours and 45 minutes to land. What is the date and time in Bejing by the time the flight lands."}],"role":"user"}
{"parts":[{"function_call":{"args":{"request":"current date and time in Toronto"},"name":"TimeAgent"},"thought_signature":"CoMJAXLI2nyeZUnePYBTJ8jVDw21x8lPcG8FKfiPOFNwLJOSJw3npZZ7DqsxDEoDOfcdrkrEeHiRDzl_eiylarlwKCh85774t5GVfT4Kzt7NVGEQyMxQgCBOeQdZs8S1ybF_lvbcZypzUgy5CDeCQou4HHcASITZJe7BYO897rSQ-BZT7V4l20NtSD-6nIAvfhdbYsK2RarJ3ICYpjINwejKk4l58M3iN_ehzo6pncWX4FB4uw7SnUS5E0Xlf0CXZ4SlvB5qCZHbiypXoqDQA1gzbSKbptFJpa-h8JvkjPo-lifh3bLcGrvyoicSl9xX9Hi-F6ga0Y-VNnY2NUWloW0yYcXXMpSrgQKtCCdI_nR-YIqpnD1inuP_Q0upUHrz2h4brZ0GNGyLyYIY7YdipwFmQUmtG2U6exxdxVhzXQJgdi0wjzgs-Is-rynSHDlFsR4qe6GSQYe35N5KHt-61wlBvk1zOvdWVZn_HrQkuq-oLkbswRok7W30U6XpicCSTN9pWCmrHAp3zEs-6qMyQKpl8HHLwl8ohxCwfFdBa5uqgIyOkitNF4rrhpUG_uw7i5ZtAVpu2enHxbBXDksI1pzk6Uyzhafs9GOKvEBQ8No43zd4Tz4Xk-imXqfPgrrbgTN1RiSkdPU96i2BE77UBHrASTZd4vwH-m68c0Yf9V8i5VyjXj9RgMNAXtMH-sqlph8EdwjQhPa9yxkZMz25mHuOR8o5WNK1zQ-36xLCMkhbRrzmeGCBZfDhZZ_G0qkDKb2j_jEB-ohWtDTF8JAy25APpFMg5Uf-wgyhLPX2mprB58BLjq3lSVJlmC5FYVuXAdhVX3Vy71V_8EN9gAC5BVr7VG8hmygvf3Elf6Jd_KgMWclkqVPE29SSmcDftr1yotqjzXdE3qeRcJGgbOVnzt3eeSTnJpN4dDBVjdH8FTx85spfICB9mW9UIrkK2pAEfdGDy-pXqVs-IIdb5sG80A0TvsBYBaCZWrKrtwV7u_zsNXznVkZ2hGItKz9b6Y2bIlt-OeuxZdmquFPm6p5jjiX5LGhXnOXirCHi4HtJj4iuZafl_bKL5TgKZOj-1LehDwKKEo5Eq3OdU5kK-5YnfVRLE-lVbMVM4aN-si0fReUHZ1wYnVaVYJiPnhcO13Zdm23VkKbyIgJURLIXvcTJLAf61CSZF5yOGQHcq_h9wZEOZr_JrX4zCO0eF44kSMBxKktb5mpBxXwla0ECvmVsu8aBaJgAeNlKy443HUNtpWmUbmPFUm3R4Wu7R4yslmHa1mLqB2BnZDxEZkZIxojC4MRttaZUWHLTMhMVINRP-IuJwBv0WInHTCbM1uvbDMYTwQumD2kxi9e9H1VA8d77iAa4SZTRUX9aYn-AkNU_IHfEoiiFm177xokovq-Sm72-qUyN9wVayDg1ZUT4HZERYS6iKHjFIcZ3d5_XL3lf0_tCM6YdoWqFskbI8QvfS2EdxiSTkjPvm3KVJzENl5fmf6sjBqgFs3RTsOJQFJnMyOvjRDRXg5qnrZVm2zmlemnF2boEUGZe"}],"role":"model"}
{"parts":[{"function_response":{"name":"TimeAgent","response":{"result":"The current date and time in Toronto, Canada is 2025-11-30 13:49:05 EST."}}}],"role":"user"}
{"parts":[{"function_call":{"args":{"request":"A flight is taking off from Toronto at 2025-11-30 13:49:05 EST. It will take off in 35 minutes and the flight duration is 13 hours and 45 minutes. Calculate the landing date and time in Beijing (CST time zone) when the flight lands."},"name":"DataAnalystAgent"},"thought_signature":"CqwEAXLI2nxeSzQrMKJTxHFjBLL9N7HL0Pnw7BaKQQz4dkUmjTZjCf4BKkidL-dPCf9SVbGRmvtUqjCpUOzbVU1dcxqiQxZ8BPIbyIhSckTIEkQg5bkQaFxwj5zqn21cSkxZj_-XuirhYGYiw1y5ayZDQs4vud2icTW4ihPBWaQB9xLRHEWzithFT4V4QzCUmAzO2I-34QQ_t9r2bzmOdpzc5mf_QJyagsKcnRiEpeHHJTFcUb2brLwy_dvwqWFcHpagKBlVGJ2jNthQHH8D5UVmdfXiTs56Vno5plvA_sFh7KyoSP7XZ-5YVam66y_ofnyIpPLwJwP9pf8-_hN7Pbob0cxvsYiUJF_5kVtpkSB-2quqlbJqB2UeO4Mof1syHk0wRYM5zJQcUbTrmTlHaWJsU9d0vaVbrVxfLeHv1fdtKU_OdHahfr1-tTSFLVjXHDrx4LXzZOJokPI3bAr1_J2TPHN6YsKFChUw9VqiJTcWDUt50t5zF6dztgJr6OsUr5lgQ6yYrocsaHNw6baqXKdcvcgc3q3y-O2p-09GlkEgjrSoqZirgLvbG8uK16wtNWey7mEtUwT3VpMGMsYeXGFrbVys73IEVyfrXIpilOGB3tbGg-3_3yP5ZD2ZPl6Id6YIF0dRlNJsvhiTydy3Jp4yqJtOcaHsD1BfvQAZDUzZjjPypQ8_Myu83AGDtRMscG58Ym74q9lY_kD8TUWhb7CZ_b-wuW4AuN58On2Qeg=="}],"role":"model"}
{"parts":[{"function_response":{"name":"DataAnalystAgent","response":{"result":""}}}],"role":"user"}
{"parts":[{"function_call":{"args":{"request":"Given the current time in Toronto is 2025-11-30 13:49:05 EST. A flight departs in 35 minutes. The flight duration is 13 hours and 45 minutes. Calculate the exact date and time of landing in Beijing, considering Toronto is EST (UTC-5) and Beijing is CST (UTC+8)."},"name":"DataAnalystAgent"},"thought_signature":"CrYHAXLI2nw-Pig3Yz3nfwoVyTyXjFsoNk4hWDkPrS8FYbJgELNeFexa5-Bzp-3SrJPgLxwHIGhzqbY0Y1pmFpwSPCIhc3r6A3gGz3_uWFItfrRCi9eFV_75bfKl_Qx3wxRj-UBIGcMnZe1vqN2aRxQ7V8e9jWgRffrsFuAAq4ExDWtbkLDyNv07fORJkyXINEwqbINn8ofSJVzBUE8Q0UAQlZ-eq9ni1B1IuTEUkJOKWJ2Xz2gnfU6ek7hWPLt6rv84hZ4sUEx7QZEQg1pO8SFh0ke_cfLQAPdb77odBBFw99ysXXWZrkeA23HIr-1VYsVF1Cd6d_Twu1c0013prDkBNQWCfW1ORlMGvXtr0OpyXHLHFco2hDYVaisOTSa1Acg-ND_-EH6oUihCach6gDVYRO_RMn4uUVdcYKgU3B6wferSkaWbBfBtgsKPtIBRzGoand8k5ASOGplCrd6C3g-XzVV0PzkDEfgCWgXE0u63oEdYLNXxD6o9ExoW3GU8fA_m8-_eGrwR-Gwyu3OFhJz89UhVEA9tF0CuX2fTEtfP1WnM9THhTQ9iZGZA9tg_O4sTF51Lcx0t1DWPpRJ4m9B1DDhzEj720oxAXVmdfklW57QwSq3hIZo5gYpGkfNo6hxrh_YOiPusTx9bslm0afKlPR86Y_-r4zoEG0yFCvc_hPzBuMbWeSON-XgeUthtCRXixeKHzRBDoFNZUJvewhYBekZx7g5PuOwdHrM8Tj3XYsLhWTeL0cWKCLFDauP9KUK8KEOhG65yPeLsLXlEB6sKz8k6JpC17XJnrC1i44BMufimrqucEaf4ttzHpRngu80zc-9-NffiqUTwI4R5y1bgbsyH4mZ5v2mM_4jTEsHy42EgW_KyM7Mlshn0Qv7SBJo2E4wQQncrn7pLZP87GyQnxoXTzP8sVqeewriFanoMGqcwmY2lv391k5TNXIsLt0E5I6qqc7huqucuAirmnbEJoX2pulI3YVM_TMgTNSuwnB5zBmkQFkxk0JKrasAtH4u66RUnN3x1k90Os0Ccy5H0GjORADAZ1U7WgI-Vvi53qSazTBYwpUGEY6mNfMgeUSuolIc294746RTNqrnO-gdDPT9LDBZhy7bGWWOHVR5YI9mY_demXeGNUUYwI3IGEOBdWEqbAchwH2K0VeBe_Uu__LTap6RVhUyZwUHfwXeIwWxeeIVpeyV_FoLyhIwZ-HlzBckIJ39iciLfLL-vrlCrGQMrHuq-IsaA1b1ZGXh8RI2fr8vrqi4="}],"role":"model"}
{"parts":[{"function_response":{"name":"DataAnalystAgent","response":{"result":""}}}],"role":"user"}
-----------------------------------------------------------
Functions:
RetrieveHealthDataAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
ResearchAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
DataAnalystAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
SummarizerAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
HealthAdviceAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
TimeAgent: {'request': {'type': <Type.STRING: 'STRING'>}} 
-----------------------------------------------------------

google_llm.py:219 INFO:Response received from the model.
google_llm.py:220 DEBUG:
LLM Response:
-----------------------------------------------------------
Text:
Based on the current time in Toronto (2025-11-30 13:49:05 EST):

1.  **Take-off Time in Toronto:**
    Adding 35 minutes to the current time: 2025-11-30 14:24:05 EST.

2.  **Landing Time in Toronto (Local Time):**
    Adding the flight duration (13 hours and 45 minutes) to the take-off time:
    2025-11-30 14:24:05 EST + 13 hours 45 minutes = 2025-12-01 04:09:05 EST.

3.  **Landing Time in Beijing (CST):**
    Beijing (CST, UTC+8) is 13 hours ahead of Toronto (EST, UTC-5).
    Adding 13 hours to the Toronto landing time:
    2025-12-01 04:09:05 EST + 13 hours = 2025-12-01 17:09:05 CST.

The flight will land in Beijing on **2025-12-01 at 17:09:05 CST**.
-----------------------------------------------------------
Function calls:

-----------------------------------------------------------
Raw response:
{"sdk_http_response":{"headers":{"Content-Type":"application/json; charset=UTF-8","Vary":"Origin, X-Origin, Referer","Content-Encoding":"gzip","Date":"Sun, 30 Nov 2025 18:49:23 GMT","Server":"scaffolding on HTTPServer2","X-XSS-Protection":"0","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Server-Timing":"gfet4t7; dur=4463","Alt-Svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","Transfer-Encoding":"chunked"}},"candidates":[{"content":{"parts":[{"text":"Based on the current time in Toronto (2025-11-30 13:49:05 EST):\n\n1.  **Take-off Time in Toronto:**\n    Adding 35 minutes to the current time: 2025-11-30 14:24:05 EST.\n\n2.  **Landing Time in Toronto (Local Time):**\n    Adding the flight duration (13 hours and 45 minutes) to the take-off time:\n    2025-11-30 14:24:05 EST + 13 hours 45 minutes = 2025-12-01 04:09:05 EST.\n\n3.  **Landing Time in Beijing (CST):**\n    Beijing (CST, UTC+8) is 13 hours ahead of Toronto (EST, UTC-5).\n    Adding 13 hours to the Toronto landing time:\n    2025-12-01 04:09:05 EST + 13 hours = 2025-12-01 17:09:05 CST.\n\nThe flight will land in Beijing on **2025-12-01 at 17:09:05 CST**.","thought_signature":"CvYQAXLI2nzUdJE4-fcaPomCrr1DAmY2yIud8wBSMD1LO_Wxw23M3-UQ860fU92P4orcq0LeGMn3EuSBThBYIZ8UGT-dyuGM8fUzqryIOC5CA7a8LPJO2ciqojwdI9iQJZzArrlC9iO43v8xPdj8orulTL_NQ92JixWpbtETyyhftDg0IUTqOr9jo1hhqPDosZ2YgJ6twlS9UIH8nEkPFuNrAOJebr6O2NAGC-GA8SIkYGVG_WJqcGHdzAwhSdXkpQ8BHiT42oyNeOBly0z4iplbVQ0h7eu2-MTz9Wce3AWLlzOJwPkoaig25CH4kuGrjftEgGCg8foT8QeSjZUf1TTMJ84zGYKgg7CZQ4tX5uoaAH9eHpbCEydlRUIsrjcUktE6lgKCPcY3BCNdvKBKo6TFlo0EQ4GWH_zaLX85kC0Ssf9Amc1ntiGOSCF8uF0vFVjmcDnG4qM_YHa9Y232YyFyLCpOdK9I4OFTSuN89d4BxoOHHJ3cDgQUEEnmzTuGTZojiL-46LejrlDcuMyDiGKE2S_osDFp6jpwXnZW_u6EZCejPsbaiATsadOQ5dN3i5v-S_ZQ2QDkM6LqpIII0Zkzjz_O6Z6HflMyHYkIMUAVsiqJHwWddT_C3AZuaLTn4Q7ti45OzkoiRROA5h4FY5Uj7StXzTgptSxNepMZzJOSvJqMbK0sWPV2NWBU2uykJOxXkm2qlklSxgsOhReofZB3FdDRniKeU-dUtUwMHJraqqMR2-AVfhQZs7l09feDBBdDYYX0yAl8TzAo4cCkbb3yryTMN3UxC8sfjf7lnIijnAsY9gOQ7dsfbKQcDbyFHu41k2Tz5En96JiSeqjvqQsh_2iZz5UAa51noU60NpczwAe3k35pGmE7W95edvZKQPsrexnhJ0OLumqu3Qzd8YfHGM5-HhZ_Dtqg95ygP4Q_wnR93Jr-t_K5XoHVEXbtmegUsQ5V9FDfGAAI0qHCAoiZTtDrbqdCHzOMZVajh0x7v1WYCUKSisv-2D85sUtbgSrSDZKeS-QN3TL5_YU6U3Jes6Lu9-5GHeKnRdWZMkhbvoDsTYKYRCrjmWme_kVAZCkPFp-4FHf8NTb6vIXlzHTA9nKqMgI-P_gGsUEylm49XBRbluSAlCVNl9zvCQ70HgjxxoPEIFMaZxo88WijW3eI7jo88f8sOJ3l27heu5PkP-ir7b7f20kVJQQE2cq6VTsOZPcjt2TLNvqD0zmAqGbQfuHCGbPf2WKFbByrk3N8gJYIUKiW4oGf--ICX7chmolk65vUIKqdAUS1fJCQhWDfnDZEW-EwiuL_kRX3kcYGaPVUJxX5sRBEf6-skmEao_WDs6Zcu68gsxKwLZSl6_orhje8TuoCNcpFUdYx9Ojvnshm9CvE05OM28fIpVQb2IspHxXcchqko1z_4zHBBoipgvg76fCiPovYgzwD7mALFftZbdU7-t9pXJVppvUEbEP3tUIeqHGvAhf9aYtSKmAZbECU6LhTXu7ZZLdpdBx9gE8-G_HZLeB_o4iOJwNkpiyle5GEHzd_qgX49RCx1CoDBbdJu-wLZP098Hr8RtCnPu-SfihxNGWE0q4N0sJoeZ6vw7-E6BLD6GnXmx7DoOp5Y86rIWhmzzPeUU8Hno_d8pT9KDBqC0fYJDUqYP-ewayG2xNL2QfAq8EqGroeq7ba_Y6OtcKs1C5F1RTNNHhVn1wSJKUkfH5isrxiXAxbGdQDiPAKg3o6vpdBDb1WhSE0yTNbyFilFDOghxd8nkf4_x4LEybF3gbOppzQyBMQZBlKBLs7v1-7tqP0Ll-gUn3G5rqwPFPmbCrGT_-IsKfAqd4Q9wXWeJpVXZVTdlAVhchW1_biUCRyoa3oaNaSU-L-6Ce41SiUDl3ZeAxHQoP8c7L7vFyw0y62S9C1A3-kB5cIA5NRoE7iQ7Q4dN_7k8eKWjz_t9DOz8pgxLcwm2_auQutdgAKv5Bz7OFN40k5nAxiawyW7OHsy3rdQo8FEHi8zZG6BFKZwoMrIvAZMzz2yQDV81aTWRGIT5lcaF8J4Afn2Aai135UqJmpqeq0jLhksaoUultaUfN9q03jA49mXRcpz-gy9tfftprYXEMCeew71jAzJAMl6WFq7nnMSuEz3gsBVlcVuw8K-9RsCC7hG3nadYJycF2GZPrqWZo0mSiO2ElrwZOSUjbZ_5i2aGEV4euEe9djc7APbaP44m5Ue8SHfC4wleF7ldzYOZ0zZLOSBk5QaLB75faoy3EP3n32XM5Gss9MRMl-THYfwrqSqE5xSYMyqDJEFXIMWyoBsO-jMZtXKOUw71iZKtfQ_eCvcQLJ_ON9I48xcz_Juf0eQrSoLt2i3DSggkfoakcO7GH-ocM6aScwccDgQuOCYZUVkvJH02uFmehHJbIGQYsf0pGLyG4pRUhV2fB3tDCzmhrLcf26JxwdnmjJ3QZy6Ni2gn08dvGeUG9oZUFD62t8EyXIL-Cv264uwiNB6SuinKo91vHuoAh1mrcgChuSiKOe6ZBNsKi59ryxq5CaVr99o1TnRdIDdtcAin4s_fLNaN6epEYWWkrYi7Egz8woA0K_MGCH2MIKQczYHtNB4-EB7VC91PrSKJvQE0npwEQcR65CtZySMDE9MQnX0RBBzVNW4s-qMh4k27R0OPDYnqi6gJtR-MMdH0EsBZxU-vNL1jeG_d5k0RW1sVFo1egcPXW-xqaxIaxNy_F-7oJF9Loa7zBw1_kElfm4PmPsmlWcoQsSXIShtcirkQYLHV_FhT-tlqiJV7nnrrbDqPjriDPK6mwBqgbDcsH7-DW6mFVza73OwcFXp2uV2r-j8stIumG6ToZLi--MDb8Yytm-RGumwqBZ5PH25ox0f-CjS_qTYiDWqrWWZDNp"}],"role":"model"},"finish_reason":"STOP","index":0}],"model_version":"gemini-2.5-flash","response_id":"s5EsafC8GtDXjrEPs6WbuA0","usage_metadata":{"candidates_token_count":300,"prompt_token_count":1421,"prompt_tokens_details":[{"modality":"TEXT","token_count":1421}],"thoughts_token_count":676,"total_token_count":2397}}
-----------------------------------------------------------

core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b895b40>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b895b40>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b895b40>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b895b40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b895b40>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b895b40>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8590c0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8590c0>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8590c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8590c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8590c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8590c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8590c0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8590c0>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8590c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8590c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8590c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8590c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8590c0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('ac34ed46-bfab-4402-9fe5-bdca371eb7ae', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81d840>, None, None, '2025-11-30 13:49:18.906503', '{"parts": [{"text": "Based on the current time in Toronto (2025-11-30 13:49:05 EST):\\n\\n1.  **Take-off Time in Toronto:**\\n    Adding 35 minutes to the current time: 2025-11-30 14:24:05 EST.\\n\\n2.  **Landing Time in Toronto (Local Time):**\\n    Adding the flight duration (13 hours and 45 minutes) to the take-off time:\\n    2025-11-30 14:24:05 EST + 13 hours 45 minutes = 2025-12-01 04:09:05 EST.\\n\\n3.  **Landing Time in Beijing (CST):**\\n    Beijing (CST, UTC+8) is 13 hours ahead of Toronto (EST, UTC-5).\\n    Adding 13 hours to the Toronto landing time:\\n    2025-12-01 04:09:05 EST + 13 hours = 2025-12-01 17:09:05 CST.\\n\\nThe flight will land in Beijing on **2025-12-01 at 17:09:05 CST**.", "thought_signature": "CvYQAXLI2nzUdJE4-fcaPomCrr1DAmY2yIud8wBSMD1LO_Wxw23M3-UQ860fU92P4orcq0LeGMn3EuSBThBYIZ8UGT-dyuGM8fUzqryIOC5CA7a8LPJO2ciqojwdI9iQJZzArrlC9iO43v8xPdj8orulTL_NQ92JixWpbtETyyhftDg0IUTqOr9jo1hhqPDosZ2YgJ6twlS9UIH8nEkPFuNrAOJebr6O2NAGC-GA8SIkYGVG_WJqcGHdzAwhSdXkpQ8BHiT42oyNeOBly0z4iplbVQ0h7eu2-MTz9Wce3AWLlzOJwPkoaig25CH4kuGrjftEgGCg8foT8QeSjZUf1TTMJ84zGYKgg7CZQ4tX5uoaAH9eHpbCEydlRUIsrjcUktE6lgKCPcY3BCNdvKBKo6TFlo0EQ4GWH_zaLX85kC0Ssf9Amc1ntiGOSCF8uF0vFVjmcDnG4qM_YHa9Y232YyFyLCpOdK9I4OFTSuN89d4BxoOHHJ3cDgQUEEnmzTuGTZojiL-46LejrlDcuMyDiGKE2S_osDFp6jpwXnZW_u6EZCejPsbaiATsadOQ5dN3i5v-S_ZQ2QDkM6LqpIII0Zkzjz_O6Z6HflMyHYkIMUAVsiqJHwWddT_C3AZuaLTn4Q7ti45OzkoiRROA5h4FY5Uj7StXzTgptSxNepMZzJOSvJqMbK0sWPV2NWBU2uykJOxXkm2qlklSxgsOhReofZB3FdDRniKeU-dUtUwMHJraqqMR2-AVfhQZs7l09feDBBdDYYX0yAl8TzAo4cCkbb3yryTMN3UxC8sfjf7lnIijnAsY9gOQ7dsfbKQcDbyFHu41k2Tz5En96JiSeqjvqQsh_2iZz5UAa51noU60NpczwAe3k35pGmE7W95edvZKQPsrexnhJ0OLumqu3Qzd8YfHGM5-HhZ_Dtqg95ygP4Q_wnR93Jr-t_K5XoHVEXbtmegUsQ5V9FDfGAAI0qHCAoiZTtDrbqdCHzOMZVajh0x7v1WYCUKSisv-2D85sUtbgSrSDZKeS-QN3TL5_YU6U3Jes6Lu9-5GHeKnRdWZMkhbvoDsTYKYRCrjmWme_kVAZCkPFp-4FHf8NTb6vIXlzHTA9nKqMgI-P_gGsUEylm49XBRbluSAlCVNl9zvCQ70HgjxxoPEIFMaZxo88WijW3eI7jo88f8sOJ3l27heu5PkP-ir7b7f20kVJQQE2cq6VTsOZPcjt2TLNvqD0zmAqGbQfuHCGbPf2WKFbByrk3N8gJYIUKiW4oGf--ICX7chmolk65vUIKqdAUS1fJCQhWDfnDZEW-EwiuL_kRX3kcYGaPVUJxX5sRBEf6-skmEao_WDs6Zcu68gsxKwLZSl6_orhje8TuoCNcpFUdYx9Ojvnshm9CvE05OM28fIpVQb2IspHxXcchqko1z_4zHBBoipgvg76fCiPovYgzwD7mALFftZbdU7-t9pXJVppvUEbEP3tUIeqHGvAhf9aYtSKmAZbECU6LhTXu7ZZLdpdBx9gE8-G_HZLeB_o4iOJwNkpiyle5GEHzd_qgX49RCx1CoDBbdJu-wLZP098Hr8RtCnPu-SfihxNGWE0q4N0sJoeZ6vw7-E6BLD6GnXmx7DoOp5Y86rIWhmzzPeUU8Hno_d8pT9KDBqC0fYJDUqYP-ewayG2xNL2QfAq8EqGroeq7ba_Y6OtcKs1C5F1RTNNHhVn1wSJKUkfH5isrxiXAxbGdQDiPAKg3o6vpdBDb1WhSE0yTNbyFilFDOghxd8nkf4_x4LEybF3gbOppzQyBMQZBlKBLs7v1-7tqP0Ll-gUn3G5rqwPFPmbCrGT_-IsKfAqd4Q9wXWeJpVXZVTdlAVhchW1_biUCRyoa3oaNaSU-L-6Ce41SiUDl3ZeAxHQoP8c7L7vFyw0y62S9C1A3-kB5cIA5NRoE7iQ7Q4dN_7k8eKWjz_t9DOz8pgxLcwm2_auQutdgAKv5Bz7OFN40k5nAxiawyW7OHsy3rdQo8FEHi8zZG6BFKZwoMrIvAZMzz2yQDV81aTWRGIT5lcaF8J4Afn2Aai135UqJmpqeq0jLhksaoUultaUfN9q03jA49mXRcpz-gy9tfftprYXEMCeew71jAzJAMl6WFq7nnMSuEz3gsBVlcVuw8K-9RsCC7hG3nadYJycF2GZPrqWZo0mSiO2ElrwZOSUjbZ_5i2aGEV4euEe9djc7APbaP44m5Ue8SHfC4wleF7ldzYOZ0zZLOSBk5QaLB75faoy3EP3n32XM5Gss9MRMl-THYfwrqSqE5xSYMyqDJEFXIMWyoBsO-jMZtXKOUw71iZKtfQ_eCvcQLJ_ON9I48xcz_Juf0eQrSoLt2i3DSggkfoakcO7GH-ocM6aScwccDgQuOCYZUVkvJH02uFmehHJbIGQYsf0pGLyG4pRUhV2fB3tDCzmhrLcf26JxwdnmjJ3QZy6Ni2gn08dvGeUG9oZUFD62t8EyXIL-Cv264uwiNB6SuinKo91vHuoAh1mrcgChuSiKOe6ZBNsKi59ryxq5CaVr99o1TnRdIDdtcAin4s_fLNaN6epEYWWkrYi7Egz8woA0K_MGCH2MIKQczYHtNB4-EB7VC91PrSKJvQE0npwEQcR65CtZySMDE9MQnX0RBBzVNW4s-qMh4k27R0OPDYnqi6gJtR-MMdH0EsBZxU-vNL1jeG_d5k0RW1sVFo1egcPXW-xqaxIaxNy_F-7oJF9Loa7zBw1_kElfm4PmPsmlWcoQsSXIShtcirkQYLHV_FhT-tlqiJV7nnrrbDqPjriDPK6mwBqgbDcsH7-DW6mFVza73OwcFXp2uV2r-j8stIumG6ToZLi--MDb8Yytm-RGumwqBZ5PH25ox0f-CjS_qTYiDWqrWWZDNp"}], "role": "model"}', None, None, '{"candidates_token_count": 300, "prompt_token_count": 1421, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 1421}], "thoughts_token_count": 676, "total_token_count": 2397}', None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8590c0>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('ac34ed46-bfab-4402-9fe5-bdca371eb7ae', 'ottawa_public_health_agent', 'user', 'my_session_id', 'e-603d1753-1ca7-4cd4-9e09-4a3d58af0ccb', 'ottawa_public_health_agent', <memory at 0x10b81d840>, None, None, '2025-11-30 13:49:18.906503', '{"parts": [{"text": "Based on the current time in Toronto (2025-11-30 13:49:05 EST):\\n\\n1.  **Take-off Time in Toronto:**\\n    Adding 35 minutes to the current time: 2025-11-30 14:24:05 EST.\\n\\n2.  **Landing Time in Toronto (Local Time):**\\n    Adding the flight duration (13 hours and 45 minutes) to the take-off time:\\n    2025-11-30 14:24:05 EST + 13 hours 45 minutes = 2025-12-01 04:09:05 EST.\\n\\n3.  **Landing Time in Beijing (CST):**\\n    Beijing (CST, UTC+8) is 13 hours ahead of Toronto (EST, UTC-5).\\n    Adding 13 hours to the Toronto landing time:\\n    2025-12-01 04:09:05 EST + 13 hours = 2025-12-01 17:09:05 CST.\\n\\nThe flight will land in Beijing on **2025-12-01 at 17:09:05 CST**.", "thought_signature": "CvYQAXLI2nzUdJE4-fcaPomCrr1DAmY2yIud8wBSMD1LO_Wxw23M3-UQ860fU92P4orcq0LeGMn3EuSBThBYIZ8UGT-dyuGM8fUzqryIOC5CA7a8LPJO2ciqojwdI9iQJZzArrlC9iO43v8xPdj8orulTL_NQ92JixWpbtETyyhftDg0IUTqOr9jo1hhqPDosZ2YgJ6twlS9UIH8nEkPFuNrAOJebr6O2NAGC-GA8SIkYGVG_WJqcGHdzAwhSdXkpQ8BHiT42oyNeOBly0z4iplbVQ0h7eu2-MTz9Wce3AWLlzOJwPkoaig25CH4kuGrjftEgGCg8foT8QeSjZUf1TTMJ84zGYKgg7CZQ4tX5uoaAH9eHpbCEydlRUIsrjcUktE6lgKCPcY3BCNdvKBKo6TFlo0EQ4GWH_zaLX85kC0Ssf9Amc1ntiGOSCF8uF0vFVjmcDnG4qM_YHa9Y232YyFyLCpOdK9I4OFTSuN89d4BxoOHHJ3cDgQUEEnmzTuGTZojiL-46LejrlDcuMyDiGKE2S_osDFp6jpwXnZW_u6EZCejPsbaiATsadOQ5dN3i5v-S_ZQ2QDkM6LqpIII0Zkzjz_O6Z6HflMyHYkIMUAVsiqJHwWddT_C3AZuaLTn4Q7ti45OzkoiRROA5h4FY5Uj7StXzTgptSxNepMZzJOSvJqMbK0sWPV2NWBU2uykJOxXkm2qlklSxgsOhReofZB3FdDRniKeU-dUtUwMHJraqqMR2-AVfhQZs7l09feDBBdDYYX0yAl8TzAo4cCkbb3yryTMN3UxC8sfjf7lnIijnAsY9gOQ7dsfbKQcDbyFHu41k2Tz5En96JiSeqjvqQsh_2iZz5UAa51noU60NpczwAe3k35pGmE7W95edvZKQPsrexnhJ0OLumqu3Qzd8YfHGM5-HhZ_Dtqg95ygP4Q_wnR93Jr-t_K5XoHVEXbtmegUsQ5V9FDfGAAI0qHCAoiZTtDrbqdCHzOMZVajh0x7v1WYCUKSisv-2D85sUtbgSrSDZKeS-QN3TL5_YU6U3Jes6Lu9-5GHeKnRdWZMkhbvoDsTYKYRCrjmWme_kVAZCkPFp-4FHf8NTb6vIXlzHTA9nKqMgI-P_gGsUEylm49XBRbluSAlCVNl9zvCQ70HgjxxoPEIFMaZxo88WijW3eI7jo88f8sOJ3l27heu5PkP-ir7b7f20kVJQQE2cq6VTsOZPcjt2TLNvqD0zmAqGbQfuHCGbPf2WKFbByrk3N8gJYIUKiW4oGf--ICX7chmolk65vUIKqdAUS1fJCQhWDfnDZEW-EwiuL_kRX3kcYGaPVUJxX5sRBEf6-skmEao_WDs6Zcu68gsxKwLZSl6_orhje8TuoCNcpFUdYx9Ojvnshm9CvE05OM28fIpVQb2IspHxXcchqko1z_4zHBBoipgvg76fCiPovYgzwD7mALFftZbdU7-t9pXJVppvUEbEP3tUIeqHGvAhf9aYtSKmAZbECU6LhTXu7ZZLdpdBx9gE8-G_HZLeB_o4iOJwNkpiyle5GEHzd_qgX49RCx1CoDBbdJu-wLZP098Hr8RtCnPu-SfihxNGWE0q4N0sJoeZ6vw7-E6BLD6GnXmx7DoOp5Y86rIWhmzzPeUU8Hno_d8pT9KDBqC0fYJDUqYP-ewayG2xNL2QfAq8EqGroeq7ba_Y6OtcKs1C5F1RTNNHhVn1wSJKUkfH5isrxiXAxbGdQDiPAKg3o6vpdBDb1WhSE0yTNbyFilFDOghxd8nkf4_x4LEybF3gbOppzQyBMQZBlKBLs7v1-7tqP0Ll-gUn3G5rqwPFPmbCrGT_-IsKfAqd4Q9wXWeJpVXZVTdlAVhchW1_biUCRyoa3oaNaSU-L-6Ce41SiUDl3ZeAxHQoP8c7L7vFyw0y62S9C1A3-kB5cIA5NRoE7iQ7Q4dN_7k8eKWjz_t9DOz8pgxLcwm2_auQutdgAKv5Bz7OFN40k5nAxiawyW7OHsy3rdQo8FEHi8zZG6BFKZwoMrIvAZMzz2yQDV81aTWRGIT5lcaF8J4Afn2Aai135UqJmpqeq0jLhksaoUultaUfN9q03jA49mXRcpz-gy9tfftprYXEMCeew71jAzJAMl6WFq7nnMSuEz3gsBVlcVuw8K-9RsCC7hG3nadYJycF2GZPrqWZo0mSiO2ElrwZOSUjbZ_5i2aGEV4euEe9djc7APbaP44m5Ue8SHfC4wleF7ldzYOZ0zZLOSBk5QaLB75faoy3EP3n32XM5Gss9MRMl-THYfwrqSqE5xSYMyqDJEFXIMWyoBsO-jMZtXKOUw71iZKtfQ_eCvcQLJ_ON9I48xcz_Juf0eQrSoLt2i3DSggkfoakcO7GH-ocM6aScwccDgQuOCYZUVkvJH02uFmehHJbIGQYsf0pGLyG4pRUhV2fB3tDCzmhrLcf26JxwdnmjJ3QZy6Ni2gn08dvGeUG9oZUFD62t8EyXIL-Cv264uwiNB6SuinKo91vHuoAh1mrcgChuSiKOe6ZBNsKi59ryxq5CaVr99o1TnRdIDdtcAin4s_fLNaN6epEYWWkrYi7Egz8woA0K_MGCH2MIKQczYHtNB4-EB7VC91PrSKJvQE0npwEQcR65CtZySMDE9MQnX0RBBzVNW4s-qMh4k27R0OPDYnqi6gJtR-MMdH0EsBZxU-vNL1jeG_d5k0RW1sVFo1egcPXW-xqaxIaxNy_F-7oJF9Loa7zBw1_kElfm4PmPsmlWcoQsSXIShtcirkQYLHV_FhT-tlqiJV7nnrrbDqPjriDPK6mwBqgbDcsH7-DW6mFVza73OwcFXp2uV2r-j8stIumG6ToZLi--MDb8Yytm-RGumwqBZ5PH25ox0f-CjS_qTYiDWqrWWZDNp"}], "role": "model"}', None, None, '{"candidates_token_count": 300, "prompt_token_count": 1421, "prompt_tokens_details": [{"modality": "TEXT", "token_count": 1421}], "thoughts_token_count": 676, "total_token_count": 2397}', None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8590c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8590c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8944c0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b8944c0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8944c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b8944c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8944c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b8944c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
runners.py:448 DEBUG:Running event compactor.
google_llm.py:163 INFO:Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
google_llm.py:169 DEBUG:
LLM Request:
-----------------------------------------------------------
System Instruction:
None
-----------------------------------------------------------
Config:
{}
-----------------------------------------------------------
Contents:
{"parts":[{"text":"The following is a conversation history between a user and an AI agent. Please summarize the conversation, focusing on key information and decisions made, as well as any unresolved questions or tasks. The summary should be concise and capture the essence of the interaction.\\n\\nuser: what is the weather\\nottawa_public_health_agent: The current weather in Ottawa, Canada is -1C, feeling like -6C, with an 80% chance of 0.4 cm of snow.\\nuser: what is my current location\\nottawa_public_health_agent: I am sorry, I cannot determine your current location. As an AI, I do not have access to your personal information or location data.\\nuser: A flight is going to take off in 35 minutes from now, from Toronto to beijing. It will take 13 hours and 45 minutes to land. What is the date and time in Bejing by the time the flight lands.\\nottawa_public_health_agent: Based on the current time in Toronto (2025-11-30 13:49:05 EST):\n\n1.  **Take-off Time in Toronto:**\n    Adding 35 minutes to the current time: 2025-11-30 14:24:05 EST.\n\n2.  **Landing Time in Toronto (Local Time):**\n    Adding the flight duration (13 hours and 45 minutes) to the take-off time:\n    2025-11-30 14:24:05 EST + 13 hours 45 minutes = 2025-12-01 04:09:05 EST.\n\n3.  **Landing Time in Beijing (CST):**\n    Beijing (CST, UTC+8) is 13 hours ahead of Toronto (EST, UTC-5).\n    Adding 13 hours to the Toronto landing time:\n    2025-12-01 04:09:05 EST + 13 hours = 2025-12-01 17:09:05 CST.\n\nThe flight will land in Beijing on **2025-12-01 at 17:09:05 CST**."}],"role":"user"}
-----------------------------------------------------------
Functions:

-----------------------------------------------------------

models.py:7027 INFO:AFC is enabled with max remote calls: 10.
google_llm.py:219 INFO:Response received from the model.
google_llm.py:220 DEBUG:
LLM Response:
-----------------------------------------------------------
Text:
The user initiated the conversation by asking for the weather in Ottawa, which the AI provided (-1C, feeling like -6C, 80% chance of 0.4 cm snow). The user then asked for their current location, to which the AI responded that it cannot determine personal location due to privacy constraints. Finally, the user requested a calculation for a flight landing time in Beijing, given a take-off from Toronto in 35 minutes and a 13-hour 45-minute flight duration. The AI successfully calculated and provided the landing time in Beijing as **2025-12-01 at 17:09:05 CST**.

**Key Information & Decisions:**

*   **Weather:** Provided for Ottawa.
*   **User Location:** AI confirmed it cannot determine user's personal location.
*   **Flight Landing Time:** Calculated based on provided parameters, accounting for time zones.

**Unresolved Questions/Tasks:** None. All user questions were addressed.
-----------------------------------------------------------
Function calls:

-----------------------------------------------------------
Raw response:
{"sdk_http_response":{"headers":{"Content-Type":"application/json; charset=UTF-8","Vary":"Origin, X-Origin, Referer","Content-Encoding":"gzip","Date":"Sun, 30 Nov 2025 18:49:26 GMT","Server":"scaffolding on HTTPServer2","X-XSS-Protection":"0","X-Frame-Options":"SAMEORIGIN","X-Content-Type-Options":"nosniff","Server-Timing":"gfet4t7; dur=2467","Alt-Svc":"h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000","Transfer-Encoding":"chunked"}},"candidates":[{"content":{"parts":[{"text":"The user initiated the conversation by asking for the weather in Ottawa, which the AI provided (-1C, feeling like -6C, 80% chance of 0.4 cm snow). The user then asked for their current location, to which the AI responded that it cannot determine personal location due to privacy constraints. Finally, the user requested a calculation for a flight landing time in Beijing, given a take-off from Toronto in 35 minutes and a 13-hour 45-minute flight duration. The AI successfully calculated and provided the landing time in Beijing as **2025-12-01 at 17:09:05 CST**.\n\n**Key Information & Decisions:**\n\n*   **Weather:** Provided for Ottawa.\n*   **User Location:** AI confirmed it cannot determine user's personal location.\n*   **Flight Landing Time:** Calculated based on provided parameters, accounting for time zones.\n\n**Unresolved Questions/Tasks:** None. All user questions were addressed."}],"role":"model"},"finish_reason":"STOP","index":0}],"model_version":"gemini-2.5-flash","response_id":"tpEsaan1Ap6vjrEPksqrgAc","usage_metadata":{"candidates_token_count":214,"prompt_token_count":518,"prompt_tokens_details":[{"modality":"TEXT","token_count":518}],"thoughts_token_count":212,"total_token_count":944},"automatic_function_calling_history":[]}
-----------------------------------------------------------

core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b840>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b840>, 'SELECT sessions.app_name AS sessions_app_name, sessions.user_id AS sessions_user_id, sessions.id AS sessions_id, sessions.state AS sessions_state, sessions.create_time AS sessions_create_time, sessions.update_time AS sessions_update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b840>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b840>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b840>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b840>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b840>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b840>, 'SELECT app_states.app_name AS app_states_app_name, app_states.state AS app_states_state, app_states.update_time AS app_states_update_time \nFROM app_states \nWHERE app_states.app_name = ?', ('ottawa_public_health_agent',)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b840>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b840>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b840>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b840>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b840>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b840>, 'SELECT user_states.app_name AS user_states_app_name, user_states.user_id AS user_states_user_id, user_states.state AS user_states_state, user_states.update_time AS user_states_update_time \nFROM user_states \nWHERE user_states.app_name = ? AND user_states.user_id = ?', ('ottawa_public_health_agent', 'user')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b840>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b840>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b840>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b840>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b840>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('19f05f31-87d6-4f88-89ef-143c42f0ac18', 'ottawa_public_health_agent', 'user', 'my_session_id', 'f0bac4dd-9518-4e24-b7f2-46f79bdb129d', 'user', <memory at 0x10b81dcc0>, None, None, '2025-11-30 13:49:26.042826', None, None, None, None, None, None, None, None, None, None, None, None))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b840>, 'INSERT INTO events (id, app_name, user_id, session_id, invocation_id, author, actions, long_running_tool_ids_json, branch, timestamp, content, grounding_metadata, custom_metadata, usage_metadata, citation_metadata, partial, turn_complete, error_code, error_message, interrupted, input_transcription, output_transcription) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', ('19f05f31-87d6-4f88-89ef-143c42f0ac18', 'ottawa_public_health_agent', 'user', 'my_session_id', 'f0bac4dd-9518-4e24-b7f2-46f79bdb129d', 'user', <memory at 0x10b81dcc0>, None, None, '2025-11-30 13:49:26.042826', None, None, None, None, None, None, None, None, None, None, None, None)) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b840>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b840>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b6c0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id'))
core.py:106 DEBUG:operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x10b85b6c0>, 'SELECT sessions.app_name, sessions.user_id, sessions.id, sessions.state, sessions.create_time, sessions.update_time \nFROM sessions \nWHERE sessions.app_name = ? AND sessions.user_id = ? AND sessions.id = ?', ('ottawa_public_health_agent', 'user', 'my_session_id')) completed
core.py:104 DEBUG:executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b6c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x10b85b6c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b6c0>)
core.py:106 DEBUG:operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x10b85b6c0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
core.py:104 DEBUG:executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>)
core.py:106 DEBUG:operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x10b6bb3d0>) completed
compaction.py:196 DEBUG:Event compactor finished.
